{"version":3,"sources":["models.js","worldbuild.js","App.js","serviceWorker.js","index.js"],"names":["wbmodels","event","name","era","year","month","text","faction","hierarchy","rank","summary","display","parent","tags","location","type","subtype","person","title","race","subrace","sex","class","subclass","homeland","traits","abilities","Str","Dex","Con","Int","Wis","Cha","speed","languages","skills","feat","firebase","require","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","wb","rt","db","undefined","auth","user","token","login","_login","Object","asyncToGenerator","regenerator_default","a","mark","_callee","wrap","_context","prev","next","signInWithPopup","then","result","catch","error","console","log","currentUser","stop","apply","this","arguments","logout","_logout","_callee2","_context2","signOut","window","pathname","capitalizeFirst","str","toUpperCase","substr","deleteData","_deleteData","_callee3","collection","id","_context3","doc","delete","abrupt","_x","_x2","getCharacterListData","character","edit","data","forEach","e","push","subtitle","clickable","page","getDoc","_getDoc","_callee4","_context4","get","r","docs","map","o","_x3","getEditFields","model","getOwnPropertyNames","getPageData","_getPageData","_callee5","options","_context5","t0","sent","_x4","_x5","getParentNation","place","find","getUnique","arr","filter","i","indexOf","getUser","init","initializeApp","firestore","GoogleAuthProvider","useDeviceLanguage","list","index","people","world","saveData","_saveData","_callee10","path","oldID","_context10","set","_callee6","_context6","_callee7","_context7","_callee8","_context8","_callee9","_context9","_x6","_x7","_x8","_x9","sortByLastName","names","sort","b","aLast","bLast","split","length","getRelativePath","substring","replace","getSearch","parseFormData","Array","from","document","getElementById","getElementsByTagName","value","parseParams","params","out","_ref","formData","hash","alert","encodeURIComponent","EditField","props","react_default","createElement","className","placeholder","datafield","defaultValue","EditPage","Fragment","App_HeaderBar","App_List","style","height","width","borderRadius","backgroundColor","onClick","HeaderBar","App_HomeButton","App_Menu","menuType","HomeButton","href","Index","List","App_ListItem","assign","key","ListItem","App_EditField","react_router_dom","to","color","SignOut","UniqueList","isArray","Page","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","_this2","setState","prevProps","React","Component","Character","_this3","isEditMode","activeID","decodeURIComponent","App_EditPage","Faction","_this4","s","History","Location","_this5","Menu","_this6","isOpen","_this7","toggleMenu","visibility","People","_this8","nation","App_UniqueList","SignIn","World","includes","App","react_router","exact","component","Boolean","hostname","match","ReactDOM","render","src_App_0","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.a265a537.chunk.js","sourcesContent":["const wbmodels = {\r\n\tevent : {\r\n\t\tname : \"string\",\r\n\t\tera : [\"EP\", \"EM\", \"ET\", \"AF\"],\r\n\t\tyear : \"number\",\r\n\t\tmonth : \"number\",\r\n\t\ttext : \"textarea\",\r\n\t},\r\n\t\r\n\tfaction : {\r\n\t\tname : \"string\",\r\n\t\thierarchy : {\r\n\t\t\tname : \"string\",\r\n\t\t\trank : \"number\",\r\n\t\t\tsummary : \"string\",\r\n\t\t\tdisplay : \"boolean\",\r\n\t\t},\r\n\t\tparent : \"string\",\r\n\t\tsummary : \"string\",\r\n\t\ttext : \"textarea\",\r\n\t\ttags : \"array<string>\",\r\n\t},\r\n\t\r\n\tlocation : {\r\n\t\tname : \"string\",\r\n\t\tparent : \"string\",\r\n\t\ttype : [\"Nation\", \"City\", \"Region\", \"PoI\",],\r\n\t\tsubtype : \"string\",\r\n\t\tsummary : \"array<string>\",\r\n\t\ttags : \"array<string>\",\r\n\t\ttext : \"textarea\",\r\n\t},\r\n\t\r\n\tperson : {\r\n\t\tname : \"string\",\r\n\t\ttitle : \"string\",\r\n\t\trace: \"string\",\r\n\t\tsubrace: \"string\",\r\n\t\tsex : \"string\",\r\n\t\tclass : [\r\n\t\t\t\"\",\r\n\t\t\t\"Artificer\",\r\n\t\t\t\"Barbarian\",\r\n\t\t\t\"Bard\",\r\n\t\t\t\"Bloodhunter\",\r\n\t\t\t\"Cleric\",\r\n\t\t\t\"Druid\",\r\n\t\t\t\"Fighter\",\r\n\t\t\t\"Monk\",\r\n\t\t\t\"Paladin\",\r\n\t\t\t\"Ranger\",\r\n\t\t\t\"Rogue\",\r\n\t\t\t\"Sorcerer\",\r\n\t\t\t\"Warlock\",\r\n\t\t\t\"Wizard\",\r\n\t\t],\r\n\t\tsubclass : \"string\",\r\n\t\thomeland : \"string\",\r\n\t\tfaction : \"string\",\r\n\t\tsummary : \"string\",\r\n\t\ttags : \"array<string>\",\r\n\t\ttext : \"textarea\",\r\n\t},\r\n\t\r\n\trace : {\r\n\t\tname : \"string\",\r\n\t\ttype : [\"race\", \"subrace\"],\r\n\t\tparent : \"string\",\r\n\t\ttraits : \"array<trait>\",\r\n\t\tabilities : {\r\n\t\t\tStr : \"number\",\r\n\t\t\tDex : \"number\",\r\n\t\t\tCon : \"number\",\r\n\t\t\tInt : \"number\",\r\n\t\t\tWis : \"number\",\r\n\t\t\tCha : \"number\",\r\n\t\t},\r\n\t\tspeed : \"number\",\r\n\t\tlanguages : \"array<string/number>\",\r\n\t\tskills : \"string/number\",\r\n\t\tfeat : \"string/number\",\r\n\t\ttags : \"array<string>\"\r\n\t},\r\n};\r\n\r\nexport default wbmodels;","import wbmodels from \"./models\";\r\n\r\nconst firebase = require(\"firebase\");\r\nrequire(\"firebaseui\");\r\nrequire (\"firebase/firestore\");\r\n\r\nvar firebaseConfig = {\r\n\tapiKey: \"AIzaSyALa18rNIoBfvH6dK2cZTcK8zcaovF01lc\",\r\n\tauthDomain: \"worldbuild-3b59a.firebaseapp.com\",\r\n\tdatabaseURL: \"https://worldbuild-3b59a.firebaseio.com\",\r\n\tprojectId: \"worldbuild-3b59a\",\r\n\tstorageBucket: \"worldbuild-3b59a.appspot.com\",\r\n\tmessagingSenderId: \"944041908346\",\r\n\tappId: \"1:944041908346:web:4993f328632af2a2\"\r\n};\r\n\r\nconst ROOTPATH=\"\"; //window.location.hostname===\"localhost\"?\"\":\"\";\r\n\r\nconst wb = {\r\n\t\r\n\trt: ROOTPATH,\r\n\t\r\n\tdb: undefined,\r\n\tauth: undefined,\r\n\r\n\tuser: {\r\n\t\ttoken: undefined,\r\n\t\t\r\n\t\tlogin: async () => {\r\n\t\t\tawait firebase.auth().signInWithPopup(wb.auth).then(function(result) {\r\n\t\t\t\t// wb.user.token = result.credential.accessToken;\r\n\t\t\t}).catch(function(error) {\r\n\t\t\t\tconsole.error(error);\r\n\t\t\t\t// var errorCode = error.code;\r\n\t\t\t\t// var errorMessage = error.message;\r\n\t\t\t\t// var email = error.email;\r\n\t\t\t\t// var credential = error.credential;\r\n\t\t\t});\r\n\t\t\tconsole.log(firebase.auth().currentUser);\r\n\t\t},\r\n\t\t\r\n\t\tlogout: async () => {\r\n\t\t\twb.user.token = undefined;\r\n\t\t\tawait firebase.auth().signOut().then( () => {\r\n\t\t\t\twindow.location.pathname=\"/\";\r\n\t\t\t});\r\n\t\t},\r\n\t\t\t\t\r\n\t},\r\n\r\n\tcapitalizeFirst: str => str[0].toUpperCase()+str.substr(1),\r\n\t\r\n\tdeleteData: async (collection, id) => {\r\n\t\twb.db.collection(collection).doc(id).delete().then(function() {\r\n\t\t\tconsole.log(\"Document successfully deleted!\");\r\n\t\t\treturn true;\r\n\t\t}).catch(function(error) {\r\n\t\t\tconsole.error(\"Error removing document: \", error);\r\n\t\t});\r\n\t\treturn false;\r\n\t},\r\n\t\r\n\tgetCharacterListData: (character, edit) => {\r\n\t\tconst editFields = [\r\n\t\t\t\"race\",\r\n\t\t\t\"subrace\",\r\n\t\t\t\"sex\",\r\n\t\t\t\"class\",\r\n\t\t\t\"subclass\",\r\n\t\t\t\"title\",\r\n\t\t\t\"homeland\",\r\n\t\t\t\"faction\",\r\n\t\t\t\"summary\",\r\n\t\t]\r\n\t\tlet data=[];\r\n\t\tif (edit)\r\n\t\t\teditFields.forEach( e => {\r\n\t\t\t\tdata.push({\r\n\t\t\t\t\ttitle: character.data[e]?character.data[e]:\"\",\r\n\t\t\t\t\tsubtitle: e,\r\n\t\t\t\t\tclickable: false,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\telse {\r\n\t\t\tif (character.data.homeland) data.push({\r\n\t\t\t\ttitle: character.data.homeland,\r\n\t\t\t\tsubtitle: \"HOMELAND\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/location?name=\"+character.data.homeland\r\n\t\t\t});\r\n\t\t\tif (character.data.faction) data.push({\r\n\t\t\t\ttitle: character.data.faction,\r\n\t\t\t\tsubtitle: \"FACTION\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/faction?name=\"+character.data.faction\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn data;\r\n\t},\r\n\t\r\n\tgetDoc: async (doc) => wb.db.collection(doc).get().then(r => r.docs.map(o => {return {id: o.id, data: o.data()};})),\r\n\t\r\n\tgetEditFields: (page, data) => {\r\n\t\tconsole.log(page);\r\n\t\tlet model = undefined;\r\n\t\tswitch (page) {\r\n\t\t\tcase \"/character\":\r\n\t\t\t\tmodel = wbmodels.person;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"/faction\":\r\n\t\t\t\tmodel = wbmodels.faction;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"/history\":\r\n\t\t\t\tmodel = wbmodels.event;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"/location\":\r\n\t\t\t\tmodel = wbmodels.location;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn ( data ? \r\n\t\t\tObject.getOwnPropertyNames(model).map( (o) => { return { title: ( o === \"name\" ? data.id : data.data[o] ), subtitle: o, type: model[o], clickable: false }; })\r\n\t\t:\r\n\t\t\tObject.getOwnPropertyNames(model).map( (o) => { return { title: \"\", subtitle: o, type: model[o], clickable: false }; })\r\n\t\t);\r\n\t},\r\n\t\r\n\tgetPageData: async (page, options) => {\r\n\t\tswitch (page) {\r\n\t\t\tcase \"/people\":\r\n\t\t\tcase \"/character\":\r\n\t\t\t\treturn await wb.getDoc(\"characters\");\r\n\t\t\tcase \"/location\":\r\n\t\t\tcase \"/world\":\r\n\t\t\t\treturn await wb.getDoc(\"locations\");\r\n\t\t\tcase \"/faction\": \r\n\t\t\t\treturn await wb.getDoc(\"factions\");\r\n\t\t\tdefault:\r\n\t\t\t\treturn null;\r\n\t\t};\r\n\t},\r\n\t\r\n\tgetParentNation: (place, data) => typeof(place)===\"undefined\"?undefined:(place.data.type===\"Nation\"?place:wb.getParentNation(data.find(o => o.id === place.data.parent),data)),\r\n\r\n\tgetUnique: arr => arr.filter((o,i) => arr.indexOf(o) === i),\r\n\t\r\n\tgetUser: () => firebase.auth().currentUser,\r\n\t\r\n\tinit: () => {\r\n\t\tfirebase.initializeApp(firebaseConfig);\r\n\t\t\r\n\t\twb.db = firebase.firestore();\r\n\t\t\r\n\t\twb.auth = new firebase.auth.GoogleAuthProvider();\r\n\t\tfirebase.auth().useDeviceLanguage();\r\n\t\t\r\n\t},\r\n\t\r\n\tlist: {\r\n\t\tindex: [\r\n\t\t\t{\r\n\t\t\t\ttitle: \"The World\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/world\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"Factions\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/faction\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"People\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/people\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"History\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/history\",\r\n\t\t\t},\r\n\t\t],\r\n\t\tpeople: [\r\n\t\t\t{\r\n\t\t\t\ttitle: \"By Race\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/people?sort=race\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"By Class\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/people?sort=class\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"Alphabetical\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/people?sort=alpha\",\r\n\t\t\t},\r\n\t\t],\r\n\t\tworld: [\r\n\t\t\t{\r\n\t\t\t\ttitle: \"Nations\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/world?type=nation\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"Historical\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/world?type=historical\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"Alphabetical\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/world?sort=alpha\"\r\n\t\t\t},\r\n\t\t],\r\n\t},\r\n\t\r\n\tsaveData: async (path, id, data, oldID) => {\r\n\t\tswitch(path) {\r\n\t\t\tcase \"/character\":\r\n\t\t\t\t\tawait wb.db.collection(\"characters\").doc(id).set(data).then(async () => {\r\n\t\t\t\t\t\tconsole.log(\"Data saved!\");\r\n\t\t\t\t\t\tif(oldID) await wb.deleteData(\"characters\", oldID);\r\n\t\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"/faction\":\r\n\t\t\t\t\tawait wb.db.collection(\"factions\").doc(id).set(data).then(async () => {\r\n\t\t\t\t\t\tconsole.log(\"Data saved!\");\r\n\t\t\t\t\t\tif(oldID) await wb.deleteData(\"factions\", oldID);\r\n\t\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"/history\":\r\n\t\t\t\t\tawait wb.db.collection(\"events\").doc(id).set(data).then(async () => {\r\n\t\t\t\t\t\tconsole.log(\"Data saved!\");\r\n\t\t\t\t\t\tif(oldID) await wb.deleteData(\"events\", oldID);\r\n\t\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"/location\":\r\n\t\t\t\t\tawait wb.db.collection(\"locations\").doc(id).set(data).then(async () => {\r\n\t\t\t\t\t\tconsole.log(\"Data saved!\");\r\n\t\t\t\t\t\tif(oldID) await wb.deleteData(\"locations\", oldID);\r\n\t\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\t\r\n\tsortByLastName: names => names.sort(function(a,b) {\r\n\t\tlet aLast=undefined, bLast=undefined;\r\n\t\tif (typeof(a)===\"string\")\r\n\t\t\taLast=a.split(\" \")[a.split(\" \").length-1];\r\n\t\telse\r\n\t\t\taLast=a.id.split(\" \")[a.id.split(\" \").length-1];\r\n\t\tif (typeof(b)===\"string\")\r\n\t\t\tbLast=b.split(\" \")[b.split(\" \").length-1];\r\n\t\telse\r\n\t\t\tbLast=b.id.split(\" \")[b.id.split(\" \").length-1];\r\n\t\t\t\t\treturn aLast > bLast ? 1 : bLast > aLast ? -1 : 0;\r\n\t\t\t\t}),\r\n\r\n};\r\n\r\nexport default wb;\r\n// window.onload(() => {wb.init();});\r\n\r\n\r\n// window.onload(() => {console.log(\"window.onload\");});","import React from \"react\";\nimport \"./App.css\";\nimport { HashRouter as Router, Route, Link } from \"react-router-dom\";\nimport wb from \"./worldbuild.js\";\n\nconst rt = wb.rt;\n\nconst getRelativePath = (path) => path.substring(1).replace(rt,\"\").split(\"?\")[0];\n\nconst getSearch = (path) => path.split(\"?\")[1];\n\nconst parseFormData = () => {\n\tlet data = {};\n\tArray.from(document.getElementById(\"editForm\").getElementsByTagName(\"input\")).forEach(o => { if (o.name) data[o.name] = o.value; });\n\treturn data;\n};\n\nconst parseParams = params => {\n\tlet out = {};\n\tparams = params.split(\"?\")[1];\n\tif(params) {\n\t\tparams = params.split(\"&\");\n\t\tparams.forEach( e => {\n\t\t\te = e.split(\"=\");\n\t\t\tif ( e.length === 1 )\n\t\t\t\tout[e[0]] = true;\n\t\t\telse if ( e.length === 2 )\n\t\t\t\tout[e[0]] = e[1];\n\t\t});\n\t}\n\treturn out;\n};\n\nconst saveData = async (data, event) => {\n\tlet formData=parseFormData();\n\tlet params=parseParams(window.location.hash);\n\tlet name=formData.name\n\t\n\tconsole.log(wb.user);\n\t\n\tif ( !params.name) {\n\t\tdelete formData.name;\n\t\twb.saveData(getRelativePath(window.location.hash), name, formData).then(() => { window.location.hash=getRelativePath(window.location.hash)+\"?name=\" + name; } );\n\t} else if(formData.name === params.name ) {\n\t\tdelete formData.name;\n\t\twb.saveData(getRelativePath(window.location.hash), params.name, formData).then(() => { window.location.hash=window.location.hash.replace(/&*edit=true/,''); } );\t\t\n\t} else if (data[formData.name]) {\n\t\talert(\"Error: Could not save information.  A document with the name \" + formData.name + \" already exists.\");\n\t\tconsole.error(\"Could not save information.  A document with the name \" + formData.name + \" already exists.\");\n\t} else {\n\t\tdelete formData.name;\n\t\twb.saveData(getRelativePath(window.location.hash), name, formData, params.name).then(() => { window.location.hash=getRelativePath(window.location.hash)+\"?name=\" + encodeURIComponent(name)} );\n\t}\n};\n\nconst App = () => (\n\t<div className=\"App\">\n\t\t<Router>\n\t\t\t<Route path={rt+\"/\"} exact component={Index} />\n\t\t\t<Route path={rt+\"/character\"} component={Character} />\n\t\t\t<Route path={rt+\"/faction\"} component={Faction} />\n\t\t\t<Route path={rt+\"/history\"} component={History} />\n\t\t\t<Route path={rt+\"/location\"} component={Location} />\n\t\t\t<Route path={rt+\"/people\"} component={People} />\n\t\t\t<Route path={rt+\"/signin\"} component={SignIn} />\n\t\t\t<Route path={rt+\"/signout\"} component={SignOut} />\n\t\t\t<Route path={rt+\"/world\"} component={World} />\n\t\t</Router>\n\t</div>\n);\n\nconst EditField = (props) => {\n\tswitch (props.type) {\n\t\tcase \"textarea\":\n\t\t\treturn ( <textarea name={props.subtitle} type=\"text\" className=\"TextField-Large\" placeholder={ props.title ? props.title : \"Add a description...\" } datafield=\"text\" /> );\n\t\tcase \"number\":\n\t\tcase \"string\":\n\t\tdefault:\n\t\t\treturn ( <input type=\"text\" name={props.subtitle} className=\"ListEditField\" defaultValue={props.title} /> );\n\t}\n};\n\nconst EditPage = (props) => (\n\t\t\t<>\n\t\t\t\t<HeaderBar str=\"Edit\" />\n\t\t\t\t<div id=\"editForm\">\n\t\t\t\t\t<List data={wb.getEditFields(getRelativePath(window.location.hash), props.doc)} edit />\n\t\t\t\t\t<div className=\"EditButtons\">\n\t\t\t\t\t\t{ /* <button onClick={ () => { window.location.search=window.location.search.replace(/&*edit=true/,'');} } >DISCARD</button> */ }\n\t\t\t\t\t\t<div  style={{height:\"20px\", width:\"20px\", borderRadius:\"10px\", backgroundColor:\"blue\"}} onClick={() => {saveData(props.data);} }> </div>\n\t\t\t\t\t\t<button onClick={() => { saveData(props.data); } }> SAVE </button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</>\n);\n\nconst HeaderBar = (props) => (\n\t<div className=\"HeaderBar\">\n\t\t<div className=\"left\"> {\n\t\t\tgetRelativePath(window.location.hash) === rt+\"/\" ?\n\t\t\t\t([]) : (<HomeButton />)\n\t\t} </div>\n\t\t<div className=\"center\">\n\t\t\t<div className=\"HeaderTitle\">\n\t\t\t\t{props.str}\n\t\t\t</div>\n\t\t</div>\n\t\t<div className=\"right\"> {\n\t\t\tgetRelativePath(window.location.hash) === rt+\"/signin\" ?\n\t\t\t\t([]) : <Menu type={props.menuType} />\n\t\t} </div>\n\t</div>\n);\n\nconst HomeButton = (props) => (\n\t<a href=\"./\">\n\t\t<span className=\"HeaderButton\">\n\t\t\t&lt; HOME\n\t\t</span>\n\t</a>\n);\n\nconst Index = (props) => (\n\t<>\n\t\t<HeaderBar str=\"Lott\" />\n\t\t<List data={wb.list.index} />\n\t</>\n);\n\nconst List = (props) =>\n\tprops.data.map( (o,i) => <ListItem {...o} edit={props.edit} key={i} /> );\n\t// props.data.map( (o,i) => <ListItem title={o.title} subtitle={o.subtitle} clickable={o.clickable} page={o.page} edit={props.edit} type={o.type} key={i}/>);\n\t\nconst ListItem = (props) => (\n\tprops.edit ?\n\t\t\t<div className=\"ListItem\">\n\t\t\t\t<div className=\"center\">\n\t\t\t\t\t<EditField {...props} />\n\t\t\t\t\t<span className=\"ListSubtitle\">\n\t\t\t\t\t\t{props.subtitle}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t:\n\t\tprops.clickable ?\n\t\t\t<Link to={props.page}>\n\t\t\t\t<div className=\"ListItem\">\n\t\t\t\t\t<div className=\"center\">\n\t\t\t\t\t\t<span className=\"ListTitle\">\n\t\t\t\t\t\t\t{props.title}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{props.subtitle?\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t<span className=\"ListSubtitle\">\n\t\t\t\t\t\t\t\t\t{props.subtitle}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t) : ( [] )\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"right\" style={{color: \"lightgray\"}}>\n\t\t\t\t\t\t&gt;\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Link>\n\t\t:\n\t\t\t<div className=\"ListItem\">\n\t\t\t\t<div className=\"center\">\n\t\t\t\t\t<span className=\"ListTitle\">\n\t\t\t\t\t\t{props.title}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span className=\"ListSubtitle\">\n\t\t\t\t\t\t{props.subtitle}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n);\n\nconst SignOut = () => (\n\t<>\n\t\t{wb.user.logout()}\n\t</>\n);\n\nconst UniqueList = (props) => (\n\t<List data = {\n\t\twb.getUnique(props.data.map(o => o ? Array.isArray(o) ? o[0] : o : \"Other\")).sort().map(o => {return {title: wb.capitalizeFirst(o), clickable:props.clickable, page: props.page + o};})\n\t} />\n);\n\n// CLASSES //\n\nclass Page extends React.Component {\n\t\n\tconstructor(props) {\n\t\t\tsuper(props);\n\t\t\tthis.state = {\n\t\t\t\tdata: undefined,\n\t\t\t\tparams: parseParams(window.location.hash),\n\t\t\t};\n\t}\n\t\n\tcomponentDidMount() {\n\t\twb.getPageData(getRelativePath(window.location.hash)).then(r=>{\n\t\t\tthis.setState({data: r});\n\t\t});\n\t}\n\t\n\tcomponentDidUpdate(prevProps) {\n\t\tif (this.props.location !== prevProps.location) this.setState({params: parseParams(window.location.hash)});\n\t}\n\t\n};\n\nclass Character extends Page {\n\trender(props) {\n\t\tlet isEditMode = wb.getUser() && this.state.params.edit===\"true\";\n\t\tif (this.state.data) {\n\t\t\tif (this.state.params.name) {\n\t\t\t\tif ( !(this.state.params.edit===\"true\") === !isEditMode ) {\n\t\t\t\t\tlet activeID = this.state.data.find( o => o.id === decodeURIComponent(this.state.params.name) );\n\t\t\t\t\tif (activeID) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\tisEditMode ? \n\t\t\t\t\t\t\t\t<EditPage data={this.state.data} doc={activeID} />\n\t\t\t\t\t\t\t: (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<HeaderBar str={activeID.data.title?activeID.data.title+\" \"+activeID.id:activeID.id} menuType=\"character\"/>\n\t\t\t\t\t\t\t\t\t<div className=\"Text subtle\">\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\twb.capitalizeFirst((activeID.data.subrace ? activeID.data.subrace:activeID.data.race) + \" \" + \n\t\t\t\t\t\t\t\t\t\t(activeID.data.subclass ? activeID.data.subclass : activeID.data.class ? activeID.data.class : \"\" ))\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<List data = {wb.getCharacterListData(activeID,isEditMode)} edit={isEditMode} />\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t<div className=\"Text\">\n\t\t\t\t\t\t\t\t\t\t{ activeID.data.text?activeID.data.text:activeID.data.summary?activeID.data.summary:\"\" }\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t} else return (\n\t\t\t\t\t\t<div className=\"Text\">\n\t\t\t\t\t\t\tError: {decodeURIComponent(this.state.params.name)} not found.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t} else if (this.state.params.edit===\"true\") return (\n\t\t\t\t\t<div className=\"Text\">\n\t\t\t\t\t\tError: You must be logged in to edit this page.\n\t\t\t\t\t</div>\n\t\t\t\t); else return (\n\t\t\t\t\t<div className=\"Text\">\n\t\t\t\t\t\tError: How did you even do this?  This code shouldn't even be reachable.\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t} else return(\n\t\t\t\tisEditMode ?\n\t\t\t\t\t<EditPage data={this.state.data} doc={undefined} />\n\t\t\t\t:\n\t\t\t\t\t<div className=\"Text\">\n\t\t\t\t\t\tError: Parameter \"name\" missing.\n\t\t\t\t\t</div>\n\t\t\t);\n\t\t} else return ( <div> Loading... </div> );\n\t}\n}\n\nclass Faction extends Page {\n\trender() {\n\t\tlet isEditMode = wb.getUser() && this.state.params.edit===\"true\";\n\t\tif (this.state.data) {\n\t\t\tif (this.state.params.name) {\n\t\t\t\tif ( ( this.state.params.edit !== \"true\" ) === !isEditMode ) {\n\t\t\t\t\tlet activeID = this.state.data.find( o => o.id === decodeURIComponent(this.state.params.name) );\n\t\t\t\t\tif (activeID) {\n\t\t\t\t\t\tif (this.state.params.list===\"hierarchy\")\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<HeaderBar str={\"Hierarchy of \"+activeID.id} menuType=\"faction\"/>\n\t\t\t\t\t\t\t\t\t<List data={Object.getOwnPropertyNames(activeID.data.hierarchy).map(s => { return { title: s, subtitle: activeID.data.hierarchy[s].summary, clickable: true, page: \"/people?faction=\"+encodeURIComponent(activeID.id)+\"&title=\"+encodeURIComponent(s) }})} />\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\telse return (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<HeaderBar str={activeID.id} menuType=\"faction\"/>\n\t\t\t\t\t\t\t\t<div className=\"Text\">{activeID.data.summary}</div>\n\t\t\t\t\t\t\t\t<List data={\n\t\t\t\t\t\t\t\t\t[{\n\t\t\t\t\t\t\t\t\t\ttitle: \"Hierarchy\",\n\t\t\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\t\t\tpage: \"/faction?name=\"+activeID.id+\"&list=hierarchy\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: \"Members\",\n\t\t\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\t\t\tpage: \"/people?faction=\"+activeID.id,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t} />\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t} else return (\n\t\t\t\t\t\t<div className=\"Text\">\n\t\t\t\t\t\t\tError: {decodeURIComponent(this.state.params.name)} not found.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t} else if ( this.state.params.edit===\"true\" ) return (\n\t\t\t\t\t<div className=\"Text\" >\n\t\t\t\t\t\tError: You must be logged in to edit this page.\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t} else return(\n\t\t\t\tisEditMode ?\n\t\t\t\t\t<EditPage data={this.state.data} doc={{}} />\n\t\t\t\t:\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"Factions\" menuType=\"faction\"/>\n\t\t\t\t\t\t<List data={this.state.data.map( o => { return { title: o.id, subtitle: o.data.summary, clickable: true, page: \"/faction?name=\"+encodeURIComponent(o.id) }; })} />\n\t\t\t\t\t</>\n\t\t\t);\n\t\t} else return (<div> Loading... </div>);\n\t}\n}\n\nclass History extends Page {\n\trender() {\n\t\tlet isEditMode = wb.getUser() && this.state.params.edit===\"true\";\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<HeaderBar str=\"History\" menuType=\"event\"/>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nclass Location extends Page {\n\trender() {\n\t\tlet isEditMode = wb.getUser() && this.state.params.edit===\"true\";\n\t\tif (this.state.data) {\n\t\t\tif (this.state.params.name) {\n\t\t\t\tif ( !(this.state.params.edit===\"true\") === !isEditMode ) {\n\t\t\t\t\tlet activeID = this.state.data.find( o => o.id === decodeURIComponent(this.state.params.name) );\n\t\t\t\t\tif (activeID) {\n\t\t\t\t\t\tif (isEditMode) return (\n\t\t\t\t\t\t\t<EditPage data={this.state.data} doc={activeID} />\n\t\t\t\t\t\t); else if (activeID.data.type === \"Nation\") {\n\t\t\t\t\t\t\tif (this.state.params.list === \"city\") {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<HeaderBar str={\"Cities of \" + activeID.id} menuType=\"location\"/>\n\t\t\t\t\t\t\t\t\t\t<List data={this.state.data.filter(o => o.data.type===\"City\" && wb.getParentNation(o, this.state.data)!==undefined && wb.getParentNation(o, this.state.data).id === activeID.id).map(o => {return {title: o.id, subtitle: o.summary, clickable: true, page: \"/location?name=\"+encodeURIComponent(o.id)};})} />\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (this.state.params.list === \"region\") {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<HeaderBar str={\"Regions of \" + activeID.id} menuType=\"location\"/>\n\t\t\t\t\t\t\t\t\t\t<List data={this.state.data.filter(o => o.data.type===\"Region\" && wb.getParentNation(o, this.state.data)!==undefined && wb.getParentNation(o, this.state.data).id === activeID.id).map(o => {return {title: o.id, subtitle: o.summary, clickable: true, page: \"/location?name=\"+encodeURIComponent(o.id)};})} />\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (this.state.params.list === \"poi\") {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<HeaderBar str={\"Landmarks of \" + activeID.id} menuType=\"location\"/>\n\t\t\t\t\t\t\t\t\t\t<List data={this.state.data.filter(o => o.data.type===\"PoI\" && wb.getParentNation(o, this.state.data)!==undefined && wb.getParentNation(o, this.state.data).id === activeID.id).map(o => {return {title: o.id, subtitle: o.summary, clickable: true, page: \"/location?name=\"+encodeURIComponent(o.id)};})} />\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse return (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<HeaderBar str={activeID.id} menuType=\"location\"/>\n\t\t\t\t\t\t\t\t\t<List data={[\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"Cities\",\n\t\t\t\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\t\t\t\tpage: \"/location?name=\"+encodeURIComponent(activeID.id)+\"&list=city\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"Regions\",\n\t\t\t\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\t\t\t\tpage: \"/location?name=\"+encodeURIComponent(activeID.id)+\"&list=region\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"Other Points of Interest\",\n\t\t\t\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\t\t\t\tpage: \"/location?name=\"+encodeURIComponent(activeID.id)+\"&list=poi\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"Noteworthy Residents\",\n\t\t\t\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\t\t\t\tpage: \"/people?nation=\"+encodeURIComponent(activeID.id)\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t]} />\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t} else return (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<HeaderBar str={activeID.id} menuType=\"location\"/>\n\t\t\t\t\t\t\t\t\t<div>{activeID.data.summary}</div>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t} else return (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tError: {decodeURIComponent(this.state.params.name)} not found.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t} else if (this.state.params.edit===\"true\") return (\n\t\t\t\t\t<div className=\"Text\">\n\t\t\t\t\t\tError: You must be logged in to edit this page.\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t} else return(\n\t\t\t\tisEditMode ?\n\t\t\t\t\t<EditPage data={this.state.data} doc={{}} />\n\t\t\t\t:\n\t\t\t\t\t<div>\n\t\t\t\t\t\tError: Parameter \"name\" missing.\n\t\t\t\t\t</div>\n\t\t\t);\n\t\t} else return ( <div> Loading... </div> );\n\t}\n}\n\nclass Menu extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tparams: parseParams(window.location.hash),\n\t\t\tisOpen: false,\n\t\t};\n\t}\n\t\n\ttoggleMenu() {\n\t\tthis.setState({isOpen: (!this.state.isOpen)});\n\t}\n\t\n\trender() {\n\t\treturn(\n\t\t\t<div className=\"Menu\">\n\t\t\t\t<span className=\"HeaderButton\" onClick={() => { this.toggleMenu(); } }> MENU </span>\n\t\t\t\t<div className=\"MenuBody\" style={{visibility: this.state.isOpen?\"visible\":\"hidden\"}}>\n\t\t\t\t\t<List data={wb.getUser() ? (\n\t\t\t\t\t\tthis.props.type ?\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: \"Sign Out\",\n\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\tpage: rt+\"/signout\",\n\t\t\t\t\t\t\t}, // { title: \"Account\"... }\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: \"Edit Page\",\n\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\tpage: getRelativePath(window.location.hash) + \"?\" + ( getSearch(window.location.hash) ? getSearch(window.location.hash) + \"&\" : \"\" ) + \"edit=true\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: \"New \" + wb.capitalizeFirst(this.props.type),\n\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\tpage: rt+\"/\"+ this.props.type + \"?edit=true\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]\n\t\t\t\t\t\t:\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: \"Sign Out\",\n\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\tpage: rt+\"/signout\",\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t\t)\n\t\t\t\t\t:\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Sign In\",\n\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\tpage: rt+\"/signin\",\n\t\t\t\t\t\t}\n\t\t\t\t\t]} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nclass People extends Page {\n\trender(props) {\n\t\tif (this.state.data) {\n\t\t\tif (this.state.params.race)\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str={wb.capitalizeFirst(decodeURIComponent(this.state.params.race))} menuType=\"character\"/>\n\t\t\t\t\t\t<List data = {\n\t\t\t\t\t\t\tthis.state.data.filter(o => o.data.race===decodeURIComponent(this.state.params.race)).map(o => { return {title: o.data.title?o.data.title+\" \"+o.id:o.id, subtitle: o.data.summary, clickable: true, page: rt+\"/character?name=\"+encodeURIComponent(o.id)}; })\n\t\t\t\t\t\t} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\telse if (this.state.params.class)\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str={wb.capitalizeFirst(decodeURIComponent(this.state.params.class))} menuType=\"character\"/>\n\t\t\t\t\t\t<List data = {\n\t\t\t\t\t\t\tthis.state.data.filter(o => o.data.class===decodeURIComponent(this.state.params.class)).map(o => { return {title: o.data.title?o.data.title+\" \"+o.id:o.id, subtitle: o.data.summary, clickable: true, page: rt+\"/character?name=\"+encodeURIComponent(o.id)}; })\n\t\t\t\t\t\t} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\telse if (this.state.params.nation)\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str={\"Residents of \" + decodeURIComponent(this.state.params.nation)} menuType=\"character\"/>\n\t\t\t\t\t\t<List data = {\n\t\t\t\t\t\t\tthis.state.data.filter(o => o.data.homeland===decodeURIComponent(this.state.params.nation)).map(o => { return {title: o.data.title?o.data.title+\" \"+o.id:o.id, subtitle: o.data.summary, clickable: true, page: rt+\"/character?name=\"+encodeURIComponent(o.id)}; })\n\t\t\t\t\t\t} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\telse if (this.state.params.faction) {\n\t\t\t\tif (this.state.params.title)\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<HeaderBar str={decodeURIComponent(this.state.params.title)} menuType=\"character\"/>\n\t\t\t\t\t\t\t<List data = {\n\t\t\t\t\t\t\t\tthis.state.data.filter(o => o.data.faction===decodeURIComponent(this.state.params.faction) && o.data.title===decodeURIComponent(this.state.params.title)).map(o => { return {title: o.data.title?o.data.title+\" \"+o.id:o.id, subtitle: o.data.summary, clickable: true, page: rt+\"/character?name=\"+encodeURIComponent(o.id)}; })\n\t\t\t\t\t\t\t} />\n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\telse return (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str={\"Residents of \" + decodeURIComponent(this.state.params.nation)} menuType=\"character\"/>\n\t\t\t\t\t\t<List data = {\n\t\t\t\t\t\t\tthis.state.data.filter(o => o.data.faction===decodeURIComponent(this.state.params.faction)).map(o => { return {title: o.data.title?o.data.title+\" \"+o.id:o.id, subtitle: o.data.summary, clickable: true, page: rt+\"/character?name=\"+encodeURIComponent(o.id)}; })\n\t\t\t\t\t\t} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\t} else if (this.state.params.sort === \"alpha\")\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"People - Alphabetical\" menuType=\"character\"/>\n\t\t\t\t\t\t<List data = {\n\t\t\t\t\t\t\twb.sortByLastName(this.state.data).map(o => { return {title: o.data.title?o.data.title+\" \"+o.id:o.id, subtitle: o.data.summary, clickable: true, page: rt+\"/character?name=\"+encodeURIComponent(o.id)}; })\n\t\t\t\t\t\t} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\telse if (this.state.params.sort === \"class\")\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"People by Class\" menuType=\"character\"/>\n\t\t\t\t\t\t<UniqueList data = {\n\t\t\t\t\t\t\tthis.state.data.map(o => o.data.class)\n\t\t\t\t\t\t} clickable={true} page={rt+\"/people?class=\"} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\telse if (this.state.params.sort === \"race\")\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"People by Race\" menuType=\"character\"/>\n\t\t\t\t\t\t<UniqueList data = {\n\t\t\t\t\t\t\tthis.state.data.map(o => o.data.race)\n\t\t\t\t\t\t} clickable={true} page={rt+\"/people?race=\"} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\telse  return (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"People\" menuType=\"character\"/>\n\t\t\t\t\t\t<List data={wb.list.people} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t}\n\t\telse return (<div> Loading... </div>);\n\t}\n};\n\nclass SignIn extends React.Component {\n\t/*constructor(props) {\n\t\tsuper(props);\n\t}*/\n\t\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<HeaderBar str=\"Sign In\" />\n\t\t\t\t<button onClick={wb.user.login}>Sign in with Google.</button>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nclass World extends Page {\n\trender(props) {\n\t\tif (this.state.data) {\n\t\t\tif (this.state.params.type === \"nation\")\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"Nations\" menuType=\"location\"/>\n\t\t\t\t\t\t<List data={this.state.data.filter(o => o.data.type===\"Nation\").map(o => {return {title: o.id, subtitle: o.data.summary, clickable: true, page: rt+\"/location?name=\"+encodeURIComponent(o.id)};})} />\n\t\t\t\t\t</>\n\t\t\t\t)\n\t\t\telse if (this.state.params.type === \"historical\")\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"Historical Locations\" menuType=\"location\"/>\n\t\t\t\t\t\t<List data={this.state.data.filter(o => (o.data.subtype && o.data.subtype.includes(\"Historical\"))).map(o => {return {title: o.id, subtitle: o.data.summary, clickable: true, page: rt+\"/location?name=\"+encodeURIComponent(o.id)};})} />\n\t\t\t\t\t</>\n\t\t\t\t)\n\t\t\telse if (this.state.params.sort === \"alpha\")\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"Historical Locations\" menuType=\"location\"/>\n\t\t\t\t\t\t<List data={this.state.data.sort((a,b) => [a.id, b.id].sort()).map(o => {return {title: o.id, subtitle: o.data.summary, clickable: true, page: rt+\"/location?name=\"+encodeURIComponent(o.id)};})} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\telse return (\n\t\t\t\t<>\n\t\t\t\t\t<HeaderBar str=\"The World\" menuType=\"location\"/>\n\t\t\t\t\t<List data={wb.list.world} />\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\t\telse return (<div> Loading... </div>);\n\t}\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport wb from \"./worldbuild\"\n\nwb.init();\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}