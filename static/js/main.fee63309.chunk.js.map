{"version":3,"sources":["models.js","worldbuild.js","App.js","serviceWorker.js","index.js"],"names":["wbmodels","event","name","era","year","month","text","faction","hierarchy","rank","summary","display","parent","tags","location","type","subtype","person","title","race","subrace","sex","class","subclass","homeland","traits","abilities","Str","Dex","Con","Int","Wis","Cha","speed","languages","skills","feat","firebase","require","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","wb","rt","db","undefined","auth","user","token","login","_login","Object","asyncToGenerator","regenerator_default","a","mark","_callee","wrap","_context","prev","next","signInWithPopup","then","result","catch","error","console","log","currentUser","stop","apply","this","arguments","logout","_logout","_callee2","_context2","signOut","window","pathname","capitalizeFirst","str","toUpperCase","substr","deleteData","_deleteData","_callee3","collection","id","_context3","doc","delete","abrupt","_x","_x2","getCharacterListData","character","edit","data","forEach","e","push","subtitle","clickable","page","getDoc","_getDoc","_callee4","_context4","get","r","docs","map","o","_x3","getEditFields","model","getOwnPropertyNames","getPageData","_getPageData","_callee5","options","_context5","t0","sent","_x4","_x5","getParentNation","place","find","getUnique","arr","filter","i","indexOf","getUser","init","initializeApp","firestore","GoogleAuthProvider","useDeviceLanguage","list","index","people","world","saveData","_saveData","_callee10","path","oldID","_context10","set","_callee6","_context6","_callee7","_context7","_callee8","_context8","_callee9","_context9","_x6","_x7","_x8","_x9","sortByLastName","names","sort","b","aLast","bLast","split","length","parseFormData","Array","from","document","getElementById","getElementsByTagName","value","parseParams","params","out","substring","_ref","formData","search","getRelativePath","replace","alert","encodeURIComponent","EditField","props","react_default","createElement","className","placeholder","datafield","defaultValue","EditPage","Fragment","App_HeaderBar","App_List","style","height","width","borderRadius","backgroundColor","onClick","HeaderBar","App_HomeButton","App_Menu","menuType","HomeButton","href","Index","List","App_ListItem","assign","key","ListItem","App_EditField","react_router_dom","to","color","SignOut","UniqueList","isArray","Page","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","_this2","setState","prevProps","React","Component","Character","_this3","isEditMode","activeID","decodeURIComponent","App_EditPage","Faction","_this4","s","History","Location","_this5","Menu","_this6","isOpen","_this7","toggleMenu","visibility","People","_this8","nation","App_UniqueList","SignIn","World","includes","App","react_router","exact","component","Boolean","hostname","match","ReactDOM","render","src_App_0","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.fee63309.chunk.js","sourcesContent":["const wbmodels = {\r\n\tevent : {\r\n\t\tname : \"string\",\r\n\t\tera : [\"EP\", \"EM\", \"ET\", \"AF\"],\r\n\t\tyear : \"number\",\r\n\t\tmonth : \"number\",\r\n\t\ttext : \"textarea\",\r\n\t},\r\n\t\r\n\tfaction : {\r\n\t\tname : \"string\",\r\n\t\thierarchy : {\r\n\t\t\tname : \"string\",\r\n\t\t\trank : \"number\",\r\n\t\t\tsummary : \"string\",\r\n\t\t\tdisplay : \"boolean\",\r\n\t\t},\r\n\t\tparent : \"string\",\r\n\t\tsummary : \"string\",\r\n\t\ttext : \"textarea\",\r\n\t\ttags : \"array<string>\",\r\n\t},\r\n\t\r\n\tlocation : {\r\n\t\tname : \"string\",\r\n\t\tparent : \"string\",\r\n\t\ttype : [\"Nation\", \"City\", \"Region\", \"PoI\",],\r\n\t\tsubtype : \"string\",\r\n\t\tsummary : \"array<string>\",\r\n\t\ttags : \"array<string>\",\r\n\t\ttext : \"textarea\",\r\n\t},\r\n\t\r\n\tperson : {\r\n\t\tname : \"string\",\r\n\t\ttitle : \"string\",\r\n\t\trace: \"string\",\r\n\t\tsubrace: \"string\",\r\n\t\tsex : \"string\",\r\n\t\tclass : [\r\n\t\t\t\"\",\r\n\t\t\t\"Artificer\",\r\n\t\t\t\"Barbarian\",\r\n\t\t\t\"Bard\",\r\n\t\t\t\"Bloodhunter\",\r\n\t\t\t\"Cleric\",\r\n\t\t\t\"Druid\",\r\n\t\t\t\"Fighter\",\r\n\t\t\t\"Monk\",\r\n\t\t\t\"Paladin\",\r\n\t\t\t\"Ranger\",\r\n\t\t\t\"Rogue\",\r\n\t\t\t\"Sorcerer\",\r\n\t\t\t\"Warlock\",\r\n\t\t\t\"Wizard\",\r\n\t\t],\r\n\t\tsubclass : \"string\",\r\n\t\thomeland : \"string\",\r\n\t\tfaction : \"string\",\r\n\t\tsummary : \"string\",\r\n\t\ttags : \"array<string>\",\r\n\t\ttext : \"textarea\",\r\n\t},\r\n\t\r\n\trace : {\r\n\t\tname : \"string\",\r\n\t\ttype : [\"race\", \"subrace\"],\r\n\t\tparent : \"string\",\r\n\t\ttraits : \"array<trait>\",\r\n\t\tabilities : {\r\n\t\t\tStr : \"number\",\r\n\t\t\tDex : \"number\",\r\n\t\t\tCon : \"number\",\r\n\t\t\tInt : \"number\",\r\n\t\t\tWis : \"number\",\r\n\t\t\tCha : \"number\",\r\n\t\t},\r\n\t\tspeed : \"number\",\r\n\t\tlanguages : \"array<string/number>\",\r\n\t\tskills : \"string/number\",\r\n\t\tfeat : \"string/number\",\r\n\t\ttags : \"array<string>\"\r\n\t},\r\n};\r\n\r\nexport default wbmodels;","import wbmodels from \"./models\";\r\n\r\nconst firebase = require(\"firebase\");\r\nrequire(\"firebaseui\");\r\nrequire (\"firebase/firestore\");\r\n\r\nvar firebaseConfig = {\r\n\tapiKey: \"AIzaSyALa18rNIoBfvH6dK2cZTcK8zcaovF01lc\",\r\n\tauthDomain: \"worldbuild-3b59a.firebaseapp.com\",\r\n\tdatabaseURL: \"https://worldbuild-3b59a.firebaseio.com\",\r\n\tprojectId: \"worldbuild-3b59a\",\r\n\tstorageBucket: \"worldbuild-3b59a.appspot.com\",\r\n\tmessagingSenderId: \"944041908346\",\r\n\tappId: \"1:944041908346:web:4993f328632af2a2\"\r\n};\r\n\r\nconst ROOTPATH=\"\"; //window.location.hostname===\"localhost\"?\"\":\"\";\r\n\r\nconst wb = {\r\n\t\r\n\trt: ROOTPATH,\r\n\t\r\n\tdb: undefined,\r\n\tauth: undefined,\r\n\r\n\tuser: {\r\n\t\ttoken: undefined,\r\n\t\t\r\n\t\tlogin: async () => {\r\n\t\t\tawait firebase.auth().signInWithPopup(wb.auth).then(function(result) {\r\n\t\t\t\t// wb.user.token = result.credential.accessToken;\r\n\t\t\t}).catch(function(error) {\r\n\t\t\t\tconsole.error(error);\r\n\t\t\t\t// var errorCode = error.code;\r\n\t\t\t\t// var errorMessage = error.message;\r\n\t\t\t\t// var email = error.email;\r\n\t\t\t\t// var credential = error.credential;\r\n\t\t\t});\r\n\t\t\tconsole.log(firebase.auth().currentUser);\r\n\t\t},\r\n\t\t\r\n\t\tlogout: async () => {\r\n\t\t\twb.user.token = undefined;\r\n\t\t\tawait firebase.auth().signOut().then( () => {\r\n\t\t\t\twindow.location.pathname=\"/\";\r\n\t\t\t});\r\n\t\t},\r\n\t\t\t\t\r\n\t},\r\n\r\n\tcapitalizeFirst: str => str[0].toUpperCase()+str.substr(1),\r\n\t\r\n\tdeleteData: async (collection, id) => {\r\n\t\twb.db.collection(collection).doc(id).delete().then(function() {\r\n\t\t\tconsole.log(\"Document successfully deleted!\");\r\n\t\t\treturn true;\r\n\t\t}).catch(function(error) {\r\n\t\t\tconsole.error(\"Error removing document: \", error);\r\n\t\t});\r\n\t\treturn false;\r\n\t},\r\n\t\r\n\tgetCharacterListData: (character, edit) => {\r\n\t\tconst editFields = [\r\n\t\t\t\"race\",\r\n\t\t\t\"subrace\",\r\n\t\t\t\"sex\",\r\n\t\t\t\"class\",\r\n\t\t\t\"subclass\",\r\n\t\t\t\"title\",\r\n\t\t\t\"homeland\",\r\n\t\t\t\"faction\",\r\n\t\t\t\"summary\",\r\n\t\t]\r\n\t\tlet data=[];\r\n\t\tif (edit)\r\n\t\t\teditFields.forEach( e => {\r\n\t\t\t\tdata.push({\r\n\t\t\t\t\ttitle: character.data[e]?character.data[e]:\"\",\r\n\t\t\t\t\tsubtitle: e,\r\n\t\t\t\t\tclickable: false,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\telse {\r\n\t\t\tif (character.data.homeland) data.push({\r\n\t\t\t\ttitle: character.data.homeland,\r\n\t\t\t\tsubtitle: \"HOMELAND\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/location?name=\"+character.data.homeland\r\n\t\t\t});\r\n\t\t\tif (character.data.faction) data.push({\r\n\t\t\t\ttitle: character.data.faction,\r\n\t\t\t\tsubtitle: \"FACTION\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/faction?name=\"+character.data.faction\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn data;\r\n\t},\r\n\t\r\n\tgetDoc: async (doc) => wb.db.collection(doc).get().then(r => r.docs.map(o => {return {id: o.id, data: o.data()};})),\r\n\t\r\n\tgetEditFields: (page, data) => {\r\n\t\tlet model = undefined;\r\n\t\tswitch (page) {\r\n\t\t\tcase \"/character\":\r\n\t\t\t\tmodel = wbmodels.person;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"/faction\":\r\n\t\t\t\tmodel = wbmodels.faction;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"/history\":\r\n\t\t\t\tmodel = wbmodels.event;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"/location\":\r\n\t\t\t\tmodel = wbmodels.location;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tconsole.log(data);\r\n\t\treturn ( data ? \r\n\t\t\tObject.getOwnPropertyNames(model).map( (o) => { return { title: ( o === \"name\" ? data.id : data.data[o] ), subtitle: o, type: model[o], clickable: false }; })\r\n\t\t:\r\n\t\t\tObject.getOwnPropertyNames(model).map( (o) => { return { title: \"\", subtitle: o, type: model[o], clickable: false }; })\r\n\t\t);\r\n\t},\r\n\t\r\n\tgetPageData: async (page, options) => {\r\n\t\tswitch (page) {\r\n\t\t\tcase \"/people\":\r\n\t\t\tcase \"/character\":\r\n\t\t\t\treturn await wb.getDoc(\"characters\");\r\n\t\t\tcase \"/location\":\r\n\t\t\tcase \"/world\":\r\n\t\t\t\treturn await wb.getDoc(\"locations\");\r\n\t\t\tcase \"/faction\": \r\n\t\t\t\treturn await wb.getDoc(\"factions\");\r\n\t\t\tdefault:\r\n\t\t\t\treturn null;\r\n\t\t};\r\n\t},\r\n\t\r\n\tgetParentNation: (place, data) => typeof(place)===\"undefined\"?undefined:(place.data.type===\"Nation\"?place:wb.getParentNation(data.find(o => o.id === place.data.parent),data)),\r\n\r\n\tgetUnique: arr => arr.filter((o,i) => arr.indexOf(o) === i),\r\n\t\r\n\tgetUser: () => firebase.auth().currentUser,\r\n\t\r\n\tinit: () => {\r\n\t\tfirebase.initializeApp(firebaseConfig);\r\n\t\t\r\n\t\twb.db = firebase.firestore();\r\n\t\t\r\n\t\twb.auth = new firebase.auth.GoogleAuthProvider();\r\n\t\tfirebase.auth().useDeviceLanguage();\r\n\t\t\r\n\t},\r\n\t\r\n\tlist: {\r\n\t\tindex: [\r\n\t\t\t{\r\n\t\t\t\ttitle: \"The World\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/world\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"Factions\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/faction\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"People\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/people\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"History\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/history\",\r\n\t\t\t},\r\n\t\t],\r\n\t\tpeople: [\r\n\t\t\t{\r\n\t\t\t\ttitle: \"By Race\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/people?sort=race\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"By Class\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/people?sort=class\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"Alphabetical\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/people?sort=alpha\",\r\n\t\t\t},\r\n\t\t],\r\n\t\tworld: [\r\n\t\t\t{\r\n\t\t\t\ttitle: \"Nations\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/world?type=nation\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"Historical\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/world?type=historical\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"Alphabetical\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/world?sort=alpha\"\r\n\t\t\t},\r\n\t\t],\r\n\t},\r\n\t\r\n\tsaveData: async (path, id, data, oldID) => {\r\n\t\tswitch(path) {\r\n\t\t\tcase \"/character\":\r\n\t\t\t\t\tawait wb.db.collection(\"characters\").doc(id).set(data).then(async () => {\r\n\t\t\t\t\t\tconsole.log(\"Data saved!\");\r\n\t\t\t\t\t\tif(oldID) await wb.deleteData(\"characters\", oldID);\r\n\t\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"/faction\":\r\n\t\t\t\t\tawait wb.db.collection(\"factions\").doc(id).set(data).then(async () => {\r\n\t\t\t\t\t\tconsole.log(\"Data saved!\");\r\n\t\t\t\t\t\tif(oldID) await wb.deleteData(\"factions\", oldID);\r\n\t\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"/history\":\r\n\t\t\t\t\tawait wb.db.collection(\"events\").doc(id).set(data).then(async () => {\r\n\t\t\t\t\t\tconsole.log(\"Data saved!\");\r\n\t\t\t\t\t\tif(oldID) await wb.deleteData(\"events\", oldID);\r\n\t\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"/location\":\r\n\t\t\t\t\tawait wb.db.collection(\"locations\").doc(id).set(data).then(async () => {\r\n\t\t\t\t\t\tconsole.log(\"Data saved!\");\r\n\t\t\t\t\t\tif(oldID) await wb.deleteData(\"locations\", oldID);\r\n\t\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\t\r\n\tsortByLastName: names => names.sort(function(a,b) {\r\n\t\tlet aLast=undefined, bLast=undefined;\r\n\t\tif (typeof(a)===\"string\")\r\n\t\t\taLast=a.split(\" \")[a.split(\" \").length-1];\r\n\t\telse\r\n\t\t\taLast=a.id.split(\" \")[a.id.split(\" \").length-1];\r\n\t\tif (typeof(b)===\"string\")\r\n\t\t\tbLast=b.split(\" \")[b.split(\" \").length-1];\r\n\t\telse\r\n\t\t\tbLast=b.id.split(\" \")[b.id.split(\" \").length-1];\r\n\t\t\t\t\treturn aLast > bLast ? 1 : bLast > aLast ? -1 : 0;\r\n\t\t\t\t}),\r\n\r\n};\r\n\r\nexport default wb;\r\n// window.onload(() => {wb.init();});\r\n\r\n\r\n// window.onload(() => {console.log(\"window.onload\");});","import React from \"react\";\nimport \"./App.css\";\nimport { HashRouter as Router, Route, Link } from \"react-router-dom\";\nimport wb from \"./worldbuild.js\";\n\nconst rt = wb.rt;\n\nconst parseFormData = () => {\n\tlet data = {};\n\tArray.from(document.getElementById(\"editForm\").getElementsByTagName(\"input\")).forEach(o => { if (o.name) data[o.name] = o.value; });\n\treturn data;\n};\n\nconst parseParams = params => {\n\tlet out = {};\n\tparams = params.substring(1);\n\tparams=params.split(\"&\");\n\tparams.forEach( e => {\n\t\te = e.split(\"=\");\n\t\tif ( e.length === 1 )\n\t\t\tout[e[0]] = true;\n\t\telse if ( e.length === 2 )\n\t\t\tout[e[0]] = e[1];\n\t});\n\treturn out;\n};\n\nconst saveData = async (data, event) => {\n\tlet formData=parseFormData();\n\tlet params=parseParams(window.location.search);\n\tlet name=formData.name\n\t\n\tconsole.log(wb.user);\n\t\n\tif ( !params.name) {\n\t\tdelete formData.name;\n\t\twb.saveData(getRelativePath(window.location.pathname), name, formData).then(() => { window.location.search=\"?name=\" + name; } );\n\t} else if(formData.name === params.name ) {\n\t\tdelete formData.name;\n\t\twb.saveData(getRelativePath(window.location.pathname), params.name, formData).then(() => { window.location.search=window.location.search.replace(/&*edit=true/,''); } );\t\t\n\t} else if (data[formData.name]) {\n\t\talert(\"Error: Could not save information.  A document with the name \" + formData.name + \" already exists.\");\n\t\tconsole.error(\"Could not save information.  A document with the name \" + formData.name + \" already exists.\");\n\t} else {\n\t\tdelete formData.name;\n\t\twb.saveData(getRelativePath(window.location.pathname), name, formData, params.name).then(() => { window.location.search=window.location.search=\"?name=\" + encodeURIComponent(name)} );\n\t}\n};\n\nconst getRelativePath = (path) => path.replace(rt,\"\");\n\nconst App = () => (\n\t<div className=\"App\">\n\t\t<Router>\n\t\t\t<Route path={rt+\"/\"} exact component={Index} />\n\t\t\t<Route path={rt+\"/character\"} component={Character} />\n\t\t\t<Route path={rt+\"/faction\"} component={Faction} />\n\t\t\t<Route path={rt+\"/history\"} component={History} />\n\t\t\t<Route path={rt+\"/location\"} component={Location} />\n\t\t\t<Route path={rt+\"/people\"} component={People} />\n\t\t\t<Route path={rt+\"/signin\"} component={SignIn} />\n\t\t\t<Route path={rt+\"/signout\"} component={SignOut} />\n\t\t\t<Route path={rt+\"/world\"} component={World} />\n\t\t</Router>\n\t</div>\n);\n\nconst EditField = (props) => {\n\tswitch (props.type) {\n\t\tcase \"textarea\":\n\t\t\treturn ( <textarea name={props.subtitle} type=\"text\" className=\"TextField-Large\" placeholder={ props.title ? props.title : \"Add a description...\" } datafield=\"text\" /> );\n\t\tcase \"number\":\n\t\tcase \"string\":\n\t\tdefault:\n\t\t\treturn ( <input type=\"text\" name={props.subtitle} className=\"ListEditField\" defaultValue={props.title} /> );\n\t}\n};\n\nconst EditPage = (props) => (\n\t\t\t<>\n\t\t\t\t<HeaderBar str=\"Edit\" />\n\t\t\t\t<div id=\"editForm\">\n\t\t\t\t\t<List data={wb.getEditFields(getRelativePath(window.location.pathname), props.doc)} edit />\n\t\t\t\t\t<div className=\"EditButtons\">\n\t\t\t\t\t\t{ /* <button onClick={ () => { window.location.search=window.location.search.replace(/&*edit=true/,'');} } >DISCARD</button> */ }\n\t\t\t\t\t\t<div  style={{height:\"20px\", width:\"20px\", borderRadius:\"10px\", backgroundColor:\"blue\"}} onClick={() => {saveData(props.data);} }> </div>\n\t\t\t\t\t\t<button onClick={() => { saveData(props.data); } }> SAVE </button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</>\n);\n\nconst HeaderBar = (props) => (\n\t<div className=\"HeaderBar\">\n\t\t<div className=\"left\"> {\n\t\t\twindow.location.pathname === rt+\"/\" ?\n\t\t\t\t([]) : (<HomeButton />)\n\t\t} </div>\n\t\t<div className=\"center\">\n\t\t\t<div className=\"HeaderTitle\">\n\t\t\t\t{props.str}\n\t\t\t</div>\n\t\t</div>\n\t\t<div className=\"right\"> {\n\t\t\twindow.location.pathname === rt+\"/signin\" ?\n\t\t\t\t([]) : <Menu type={props.menuType} />\n\t\t} </div>\n\t</div>\n);\n\nconst HomeButton = (props) => (\n\t<a href=\"./\">\n\t\t<span className=\"HeaderButton\">\n\t\t\t&lt; HOME\n\t\t</span>\n\t</a>\n);\n\nconst Index = (props) => (\n\t<>\n\t\t<HeaderBar str=\"Lott\" />\n\t\t<List data={wb.list.index} />\n\t</>\n);\n\nconst List = (props) =>\n\tprops.data.map( (o,i) => <ListItem {...o} edit={props.edit} key={i} /> );\n\t// props.data.map( (o,i) => <ListItem title={o.title} subtitle={o.subtitle} clickable={o.clickable} page={o.page} edit={props.edit} type={o.type} key={i}/>);\n\t\nconst ListItem = (props) => (\n\tprops.edit ?\n\t\t\t<div className=\"ListItem\">\n\t\t\t\t<div className=\"center\">\n\t\t\t\t\t<EditField {...props} />\n\t\t\t\t\t<span className=\"ListSubtitle\">\n\t\t\t\t\t\t{props.subtitle}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t:\n\t\tprops.clickable ?\n\t\t\t<Link to={props.page}>\n\t\t\t\t<div className=\"ListItem\">\n\t\t\t\t\t<div className=\"center\">\n\t\t\t\t\t\t<span className=\"ListTitle\">\n\t\t\t\t\t\t\t{props.title}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{props.subtitle?\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t<span className=\"ListSubtitle\">\n\t\t\t\t\t\t\t\t\t{props.subtitle}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t) : ( [] )\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"right\" style={{color: \"lightgray\"}}>\n\t\t\t\t\t\t&gt;\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Link>\n\t\t:\n\t\t\t<div className=\"ListItem\">\n\t\t\t\t<div className=\"center\">\n\t\t\t\t\t<span className=\"ListTitle\">\n\t\t\t\t\t\t{props.title}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span className=\"ListSubtitle\">\n\t\t\t\t\t\t{props.subtitle}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n);\n\nconst SignOut = () => (\n\t<>\n\t\t{wb.user.logout()}\n\t</>\n);\n\nconst UniqueList = (props) => (\n\t<List data = {\n\t\twb.getUnique(props.data.map(o => o ? Array.isArray(o) ? o[0] : o : \"Other\")).sort().map(o => {return {title: wb.capitalizeFirst(o), clickable:props.clickable, page: props.page + o};})\n\t} />\n);\n\n// CLASSES //\n\nclass Page extends React.Component {\n\t\n\tconstructor(props) {\n\t\t\tsuper(props);\n\t\t\tthis.state = {\n\t\t\t\tdata: undefined,\n\t\t\t\tparams: parseParams(window.location.search),\n\t\t\t};\n\t}\n\t\n\tcomponentDidMount() {\n\t\twb.getPageData(getRelativePath(window.location.pathname)).then(r=>{\n\t\t\tthis.setState({data: r});\n\t\t});\n\t}\n\t\n\tcomponentDidUpdate(prevProps) {\n\t\tif (this.props.location !== prevProps.location) this.setState({params: parseParams(window.location.search)});\n\t}\n\t\n};\n\nclass Character extends Page {\n\trender(props) {\n\t\tlet isEditMode = wb.getUser() && this.state.params.edit===\"true\";\n\t\tif (this.state.data) {\n\t\t\tif (this.state.params.name) {\n\t\t\t\tif ( !(this.state.params.edit===\"true\") === !isEditMode ) {\n\t\t\t\t\tlet activeID = this.state.data.find( o => o.id === decodeURIComponent(this.state.params.name) );\n\t\t\t\t\tif (activeID) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\tisEditMode ? \n\t\t\t\t\t\t\t\t<EditPage data={this.state.data} doc={activeID} />\n\t\t\t\t\t\t\t: (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<HeaderBar str={activeID.data.title?activeID.data.title+\" \"+activeID.id:activeID.id} menuType=\"character\"/>\n\t\t\t\t\t\t\t\t\t<div className=\"Text subtle\">\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\twb.capitalizeFirst((activeID.data.subrace ? activeID.data.subrace:activeID.data.race) + \" \" + \n\t\t\t\t\t\t\t\t\t\t(activeID.data.subclass ? activeID.data.subclass : activeID.data.class ? activeID.data.class : \"\" ))\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<List data = {wb.getCharacterListData(activeID,isEditMode)} edit={isEditMode} />\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t<div className=\"Text\">\n\t\t\t\t\t\t\t\t\t\t{ activeID.data.text?activeID.data.text:activeID.data.summary?activeID.data.summary:\"\" }\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t} else return (\n\t\t\t\t\t\t<div className=\"Text\">\n\t\t\t\t\t\t\tError: {decodeURIComponent(this.state.params.name)} not found.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t} else if (this.state.params.edit===\"true\") return (\n\t\t\t\t\t<div className=\"Text\">\n\t\t\t\t\t\tError: You must be logged in to edit this page.\n\t\t\t\t\t</div>\n\t\t\t\t); else return (\n\t\t\t\t\t<div className=\"Text\">\n\t\t\t\t\t\tError: How did you even do this?  This code shouldn't even be reachable.\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t} else return(\n\t\t\t\tisEditMode ?\n\t\t\t\t\t<EditPage data={this.state.data} doc={undefined} />\n\t\t\t\t:\n\t\t\t\t\t<div className=\"Text\">\n\t\t\t\t\t\tError: Parameter \"name\" missing.\n\t\t\t\t\t</div>\n\t\t\t);\n\t\t} else return ( <div> Loading... </div> );\n\t}\n}\n\nclass Faction extends Page {\n\trender() {\n\t\tlet isEditMode = wb.getUser() && this.state.params.edit===\"true\";\n\t\tif (this.state.data) {\n\t\t\tif (this.state.params.name) {\n\t\t\t\tif ( ( this.state.params.edit !== \"true\" ) === !isEditMode ) {\n\t\t\t\t\tlet activeID = this.state.data.find( o => o.id === decodeURIComponent(this.state.params.name) );\n\t\t\t\t\tif (activeID) {\n\t\t\t\t\t\tif (this.state.params.list===\"hierarchy\")\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<HeaderBar str={\"Hierarchy of \"+activeID.id} menuType=\"faction\"/>\n\t\t\t\t\t\t\t\t\t<List data={Object.getOwnPropertyNames(activeID.data.hierarchy).map(s => { return { title: s, subtitle: activeID.data.hierarchy[s].summary, clickable: true, page: \"/people?faction=\"+encodeURIComponent(activeID.id)+\"&title=\"+encodeURIComponent(s) }})} />\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\telse return (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<HeaderBar str={activeID.id} menuType=\"faction\"/>\n\t\t\t\t\t\t\t\t<div className=\"Text\">{activeID.data.summary}</div>\n\t\t\t\t\t\t\t\t<List data={\n\t\t\t\t\t\t\t\t\t[{\n\t\t\t\t\t\t\t\t\t\ttitle: \"Hierarchy\",\n\t\t\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\t\t\tpage: \"/faction?name=\"+activeID.id+\"&list=hierarchy\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: \"Members\",\n\t\t\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\t\t\tpage: \"/people?faction=\"+activeID.id,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t} />\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t} else return (\n\t\t\t\t\t\t<div className=\"Text\">\n\t\t\t\t\t\t\tError: {decodeURIComponent(this.state.params.name)} not found.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t} else if ( this.state.params.edit===\"true\" ) return (\n\t\t\t\t\t<div className=\"Text\" >\n\t\t\t\t\t\tError: You must be logged in to edit this page.\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t} else return(\n\t\t\t\tisEditMode ?\n\t\t\t\t\t<EditPage data={this.state.data} doc={{}} />\n\t\t\t\t:\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"Factions\" menuType=\"faction\"/>\n\t\t\t\t\t\t<List data={this.state.data.map( o => { return { title: o.id, subtitle: o.data.summary, clickable: true, page: \"/faction?name=\"+encodeURIComponent(o.id) }; })} />\n\t\t\t\t\t</>\n\t\t\t);\n\t\t} else return (<div> Loading... </div>);\n\t}\n}\n\nclass History extends Page {\n\trender() {\n\t\tlet isEditMode = wb.getUser() && this.state.params.edit===\"true\";\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<HeaderBar str=\"History\" menuType=\"event\"/>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nclass Location extends Page {\n\trender() {\n\t\tlet isEditMode = wb.getUser() && this.state.params.edit===\"true\";\n\t\tif (this.state.data) {\n\t\t\tif (this.state.params.name) {\n\t\t\t\tif ( !(this.state.params.edit===\"true\") === !isEditMode ) {\n\t\t\t\t\tlet activeID = this.state.data.find( o => o.id === decodeURIComponent(this.state.params.name) );\n\t\t\t\t\tif (activeID) {\n\t\t\t\t\t\tif (isEditMode) return (\n\t\t\t\t\t\t\t<EditPage data={this.state.data} doc={activeID} />\n\t\t\t\t\t\t); else if (activeID.data.type === \"Nation\") {\n\t\t\t\t\t\t\tif (this.state.params.list === \"city\") {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<HeaderBar str={\"Cities of \" + activeID.id} menuType=\"location\"/>\n\t\t\t\t\t\t\t\t\t\t<List data={this.state.data.filter(o => o.data.type===\"City\" && wb.getParentNation(o, this.state.data)!==undefined && wb.getParentNation(o, this.state.data).id === activeID.id).map(o => {return {title: o.id, subtitle: o.summary, clickable: true, page: \"/location?name=\"+encodeURIComponent(o.id)};})} />\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (this.state.params.list === \"region\") {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<HeaderBar str={\"Regions of \" + activeID.id} menuType=\"location\"/>\n\t\t\t\t\t\t\t\t\t\t<List data={this.state.data.filter(o => o.data.type===\"Region\" && wb.getParentNation(o, this.state.data)!==undefined && wb.getParentNation(o, this.state.data).id === activeID.id).map(o => {return {title: o.id, subtitle: o.summary, clickable: true, page: \"/location?name=\"+encodeURIComponent(o.id)};})} />\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (this.state.params.list === \"poi\") {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<HeaderBar str={\"Landmarks of \" + activeID.id} menuType=\"location\"/>\n\t\t\t\t\t\t\t\t\t\t<List data={this.state.data.filter(o => o.data.type===\"PoI\" && wb.getParentNation(o, this.state.data)!==undefined && wb.getParentNation(o, this.state.data).id === activeID.id).map(o => {return {title: o.id, subtitle: o.summary, clickable: true, page: \"/location?name=\"+encodeURIComponent(o.id)};})} />\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse return (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<HeaderBar str={activeID.id} menuType=\"location\"/>\n\t\t\t\t\t\t\t\t\t<List data={[\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"Cities\",\n\t\t\t\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\t\t\t\tpage: \"/location?name=\"+encodeURIComponent(activeID.id)+\"&list=city\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"Regions\",\n\t\t\t\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\t\t\t\tpage: \"/location?name=\"+encodeURIComponent(activeID.id)+\"&list=region\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"Other Points of Interest\",\n\t\t\t\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\t\t\t\tpage: \"/location?name=\"+encodeURIComponent(activeID.id)+\"&list=poi\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"Noteworthy Residents\",\n\t\t\t\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\t\t\t\tpage: \"/people?nation=\"+encodeURIComponent(activeID.id)\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t]} />\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t} else return (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<HeaderBar str={activeID.id} menuType=\"location\"/>\n\t\t\t\t\t\t\t\t\t<div>{activeID.data.summary}</div>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t} else return (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tError: {decodeURIComponent(this.state.params.name)} not found.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t} else if (this.state.params.edit===\"true\") return (\n\t\t\t\t\t<div className=\"Text\">\n\t\t\t\t\t\tError: You must be logged in to edit this page.\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t} else return(\n\t\t\t\tisEditMode ?\n\t\t\t\t\t<EditPage data={this.state.data} doc={{}} />\n\t\t\t\t:\n\t\t\t\t\t<div>\n\t\t\t\t\t\tError: Parameter \"name\" missing.\n\t\t\t\t\t</div>\n\t\t\t);\n\t\t} else return ( <div> Loading... </div> );\n\t}\n}\n\nclass Menu extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tparams: parseParams(window.location.search),\n\t\t\tisOpen: false,\n\t\t};\n\t}\n\t\n\ttoggleMenu() {\n\t\tthis.setState({isOpen: (!this.state.isOpen)});\n\t}\n\t\n\trender() {\n\t\treturn(\n\t\t\t<div className=\"Menu\">\n\t\t\t\t<span className=\"HeaderButton\" onClick={() => { this.toggleMenu(); } }> MENU </span>\n\t\t\t\t<div className=\"MenuBody\" style={{visibility: this.state.isOpen?\"visible\":\"hidden\"}}>\n\t\t\t\t\t<List data={wb.getUser() ? (\n\t\t\t\t\t\tthis.props.type ?\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: \"Sign Out\",\n\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\tpage: rt+\"/signout\",\n\t\t\t\t\t\t\t}, // { title: \"Account\"... }\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: \"Edit Page\",\n\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\tpage: window.location.pathname + ( window.location.search ? window.location.search + \"&\" : \"?\" ) + \"edit=true\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: \"New \" + wb.capitalizeFirst(this.props.type),\n\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\tpage: rt+\"/\"+ this.props.type + \"?edit=true\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]\n\t\t\t\t\t\t:\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: \"Sign Out\",\n\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\tpage: rt+\"/signout\",\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t\t)\n\t\t\t\t\t:\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Sign In\",\n\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\tpage: rt+\"/signin\",\n\t\t\t\t\t\t}\n\t\t\t\t\t]} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nclass People extends Page {\n\trender(props) {\n\t\tif (this.state.data) {\n\t\t\tif (this.state.params.race)\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str={wb.capitalizeFirst(decodeURIComponent(this.state.params.race))} menuType=\"character\"/>\n\t\t\t\t\t\t<List data = {\n\t\t\t\t\t\t\tthis.state.data.filter(o => o.data.race===decodeURIComponent(this.state.params.race)).map(o => { return {title: o.data.title?o.data.title+\" \"+o.id:o.id, subtitle: o.data.summary, clickable: true, page: rt+\"/character?name=\"+encodeURIComponent(o.id)}; })\n\t\t\t\t\t\t} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\telse if (this.state.params.class)\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str={wb.capitalizeFirst(decodeURIComponent(this.state.params.class))} menuType=\"character\"/>\n\t\t\t\t\t\t<List data = {\n\t\t\t\t\t\t\tthis.state.data.filter(o => o.data.class===decodeURIComponent(this.state.params.class)).map(o => { return {title: o.data.title?o.data.title+\" \"+o.id:o.id, subtitle: o.data.summary, clickable: true, page: rt+\"/character?name=\"+encodeURIComponent(o.id)}; })\n\t\t\t\t\t\t} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\telse if (this.state.params.nation)\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str={\"Residents of \" + decodeURIComponent(this.state.params.nation)} menuType=\"character\"/>\n\t\t\t\t\t\t<List data = {\n\t\t\t\t\t\t\tthis.state.data.filter(o => o.data.homeland===decodeURIComponent(this.state.params.nation)).map(o => { return {title: o.data.title?o.data.title+\" \"+o.id:o.id, subtitle: o.data.summary, clickable: true, page: rt+\"/character?name=\"+encodeURIComponent(o.id)}; })\n\t\t\t\t\t\t} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\telse if (this.state.params.faction) {\n\t\t\t\tif (this.state.params.title)\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<HeaderBar str={decodeURIComponent(this.state.params.title)} menuType=\"character\"/>\n\t\t\t\t\t\t\t<List data = {\n\t\t\t\t\t\t\t\tthis.state.data.filter(o => o.data.faction===decodeURIComponent(this.state.params.faction) && o.data.title===decodeURIComponent(this.state.params.title)).map(o => { return {title: o.data.title?o.data.title+\" \"+o.id:o.id, subtitle: o.data.summary, clickable: true, page: rt+\"/character?name=\"+encodeURIComponent(o.id)}; })\n\t\t\t\t\t\t\t} />\n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\telse return (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str={\"Residents of \" + decodeURIComponent(this.state.params.nation)} menuType=\"character\"/>\n\t\t\t\t\t\t<List data = {\n\t\t\t\t\t\t\tthis.state.data.filter(o => o.data.faction===decodeURIComponent(this.state.params.faction)).map(o => { return {title: o.data.title?o.data.title+\" \"+o.id:o.id, subtitle: o.data.summary, clickable: true, page: rt+\"/character?name=\"+encodeURIComponent(o.id)}; })\n\t\t\t\t\t\t} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\t} else if (this.state.params.sort === \"alpha\")\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"People - Alphabetical\" menuType=\"character\"/>\n\t\t\t\t\t\t<List data = {\n\t\t\t\t\t\t\twb.sortByLastName(this.state.data).map(o => { return {title: o.data.title?o.data.title+\" \"+o.id:o.id, subtitle: o.data.summary, clickable: true, page: rt+\"/character?name=\"+encodeURIComponent(o.id)}; })\n\t\t\t\t\t\t} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\telse if (this.state.params.sort === \"class\")\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"People by Class\" menuType=\"character\"/>\n\t\t\t\t\t\t<UniqueList data = {\n\t\t\t\t\t\t\tthis.state.data.map(o => o.data.class)\n\t\t\t\t\t\t} clickable={true} page={rt+\"/people?class=\"} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\telse if (this.state.params.sort === \"race\")\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"People by Race\" menuType=\"character\"/>\n\t\t\t\t\t\t<UniqueList data = {\n\t\t\t\t\t\t\tthis.state.data.map(o => o.data.race)\n\t\t\t\t\t\t} clickable={true} page={rt+\"/people?race=\"} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\telse  return (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"People\" menuType=\"character\"/>\n\t\t\t\t\t\t<List data={wb.list.people} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t}\n\t\telse return (<div> Loading... </div>);\n\t}\n};\n\nclass SignIn extends React.Component {\n\t/*constructor(props) {\n\t\tsuper(props);\n\t}*/\n\t\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<HeaderBar str=\"Sign In\" />\n\t\t\t\t<button onClick={wb.user.login}>Sign in with Google.</button>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nclass World extends Page {\n\trender(props) {\n\t\tif (this.state.data) {\n\t\t\tif (this.state.params.type === \"nation\")\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"Nations\" menuType=\"location\"/>\n\t\t\t\t\t\t<List data={this.state.data.filter(o => o.data.type===\"Nation\").map(o => {return {title: o.id, subtitle: o.data.summary, clickable: true, page: rt+\"/location?name=\"+encodeURIComponent(o.id)};})} />\n\t\t\t\t\t</>\n\t\t\t\t)\n\t\t\telse if (this.state.params.type === \"historical\")\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"Historical Locations\" menuType=\"location\"/>\n\t\t\t\t\t\t<List data={this.state.data.filter(o => (o.data.subtype && o.data.subtype.includes(\"Historical\"))).map(o => {return {title: o.id, subtitle: o.data.summary, clickable: true, page: rt+\"/location?name=\"+encodeURIComponent(o.id)};})} />\n\t\t\t\t\t</>\n\t\t\t\t)\n\t\t\telse if (this.state.params.sort === \"alpha\")\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"Historical Locations\" menuType=\"location\"/>\n\t\t\t\t\t\t<List data={this.state.data.sort((a,b) => [a.id, b.id].sort()).map(o => {return {title: o.id, subtitle: o.data.summary, clickable: true, page: rt+\"/location?name=\"+encodeURIComponent(o.id)};})} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\telse return (\n\t\t\t\t<>\n\t\t\t\t\t<HeaderBar str=\"The World\" menuType=\"location\"/>\n\t\t\t\t\t<List data={wb.list.world} />\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\t\telse return (<div> Loading... </div>);\n\t}\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport wb from \"./worldbuild\"\n\nwb.init();\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}