{"version":3,"sources":["models.js","worldbuild.js","App.js","serviceWorker.js","index.js"],"names":["wbmodels","event","name","era","year","month","text","faction","hierarchy","rank","summary","display","parent","tags","location","type","subtype","person","title","race","subrace","sex","class","subclass","homeland","traits","abilities","Str","Dex","Con","Int","Wis","Cha","speed","languages","skills","feat","firebase","require","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","wb","db","undefined","auth","user","token","login","_login","Object","asyncToGenerator","regenerator_default","a","mark","_callee","wrap","_context","prev","next","signInWithPopup","then","result","catch","error","console","log","currentUser","stop","apply","this","arguments","logout","_logout","_callee2","_context2","signOut","window","pathname","capitalizeFirst","str","toUpperCase","substr","deleteData","_deleteData","_callee3","collection","id","_context3","doc","delete","abrupt","_x","_x2","getCharacterListData","character","edit","data","forEach","e","push","subtitle","clickable","page","getDoc","_getDoc","_callee4","_context4","get","r","docs","map","o","_x3","getEditFields","model","getOwnPropertyNames","getPageData","_getPageData","_callee5","options","_context5","t0","sent","_x4","_x5","getParentNation","place","find","getUnique","arr","filter","i","indexOf","getUser","init","initializeApp","firestore","GoogleAuthProvider","useDeviceLanguage","list","index","people","world","saveData","_saveData","_callee10","path","oldID","_context10","set","_callee6","_context6","_callee7","_context7","_callee8","_context8","_callee9","_context9","_x6","_x7","_x8","_x9","sortByLastName","names","sort","b","aLast","bLast","split","length","parseFormData","Array","from","document","getElementById","getElementsByTagName","value","parseParams","params","out","substring","_ref","formData","search","replace","alert","encodeURIComponent","EditField","props","react_default","createElement","className","placeholder","datafield","defaultValue","EditPage","Fragment","App_HeaderBar","App_List","style","height","width","borderRadius","backgroundColor","onClick","HeaderBar","App_HomeButton","App_Menu","menuType","HomeButton","href","Index","List","App_ListItem","assign","key","ListItem","App_EditField","react_router_dom","to","color","SignOut","UniqueList","isArray","Page","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","_this2","setState","prevProps","React","Component","Character","_this3","isEditMode","activeID","decodeURIComponent","App_EditPage","Faction","_this4","s","History","Location","_this5","Menu","_this6","isOpen","_this7","toggleMenu","visibility","People","_this8","nation","App_UniqueList","SignIn","World","includes","App","react_router","rt","exact","component","Boolean","hostname","match","ReactDOM","render","src_App_0","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.d9988bce.chunk.js","sourcesContent":["const wbmodels = {\r\n\tevent : {\r\n\t\tname : \"string\",\r\n\t\tera : [\"EP\", \"EM\", \"ET\", \"AF\"],\r\n\t\tyear : \"number\",\r\n\t\tmonth : \"number\",\r\n\t\ttext : \"textarea\",\r\n\t},\r\n\t\r\n\tfaction : {\r\n\t\tname : \"string\",\r\n\t\thierarchy : {\r\n\t\t\tname : \"string\",\r\n\t\t\trank : \"number\",\r\n\t\t\tsummary : \"string\",\r\n\t\t\tdisplay : \"boolean\",\r\n\t\t},\r\n\t\tparent : \"string\",\r\n\t\tsummary : \"string\",\r\n\t\ttext : \"textarea\",\r\n\t\ttags : \"array<string>\",\r\n\t},\r\n\t\r\n\tlocation : {\r\n\t\tname : \"string\",\r\n\t\tparent : \"string\",\r\n\t\ttype : [\"Nation\", \"City\", \"Region\", \"PoI\",],\r\n\t\tsubtype : \"string\",\r\n\t\tsummary : \"array<string>\",\r\n\t\ttags : \"array<string>\",\r\n\t\ttext : \"textarea\",\r\n\t},\r\n\t\r\n\tperson : {\r\n\t\tname : \"string\",\r\n\t\ttitle : \"string\",\r\n\t\trace: \"string\",\r\n\t\tsubrace: \"string\",\r\n\t\tsex : \"string\",\r\n\t\tclass : [\r\n\t\t\t\"\",\r\n\t\t\t\"Artificer\",\r\n\t\t\t\"Barbarian\",\r\n\t\t\t\"Bard\",\r\n\t\t\t\"Bloodhunter\",\r\n\t\t\t\"Cleric\",\r\n\t\t\t\"Druid\",\r\n\t\t\t\"Fighter\",\r\n\t\t\t\"Monk\",\r\n\t\t\t\"Paladin\",\r\n\t\t\t\"Ranger\",\r\n\t\t\t\"Rogue\",\r\n\t\t\t\"Sorcerer\",\r\n\t\t\t\"Warlock\",\r\n\t\t\t\"Wizard\",\r\n\t\t],\r\n\t\tsubclass : \"string\",\r\n\t\thomeland : \"string\",\r\n\t\tfaction : \"string\",\r\n\t\tsummary : \"string\",\r\n\t\ttags : \"array<string>\",\r\n\t\ttext : \"textarea\",\r\n\t},\r\n\t\r\n\trace : {\r\n\t\tname : \"string\",\r\n\t\ttype : [\"race\", \"subrace\"],\r\n\t\tparent : \"string\",\r\n\t\ttraits : \"array<trait>\",\r\n\t\tabilities : {\r\n\t\t\tStr : \"number\",\r\n\t\t\tDex : \"number\",\r\n\t\t\tCon : \"number\",\r\n\t\t\tInt : \"number\",\r\n\t\t\tWis : \"number\",\r\n\t\t\tCha : \"number\",\r\n\t\t},\r\n\t\tspeed : \"number\",\r\n\t\tlanguages : \"array<string/number>\",\r\n\t\tskills : \"string/number\",\r\n\t\tfeat : \"string/number\",\r\n\t\ttags : \"array<string>\"\r\n\t},\r\n};\r\n\r\nexport default wbmodels;","import wbmodels from \"./models\";\r\n\r\nconst firebase = require(\"firebase\");\r\nrequire(\"firebaseui\");\r\nrequire (\"firebase/firestore\");\r\n\r\nvar firebaseConfig = {\r\n\tapiKey: \"AIzaSyALa18rNIoBfvH6dK2cZTcK8zcaovF01lc\",\r\n\tauthDomain: \"worldbuild-3b59a.firebaseapp.com\",\r\n\tdatabaseURL: \"https://worldbuild-3b59a.firebaseio.com\",\r\n\tprojectId: \"worldbuild-3b59a\",\r\n\tstorageBucket: \"worldbuild-3b59a.appspot.com\",\r\n\tmessagingSenderId: \"944041908346\",\r\n\tappId: \"1:944041908346:web:4993f328632af2a2\"\r\n};\r\n\r\nconst wb = {\r\n\tdb: undefined,\r\n\tauth: undefined,\r\n\r\n\tuser: {\r\n\t\ttoken: undefined,\r\n\t\t\r\n\t\tlogin: async () => {\r\n\t\t\tawait firebase.auth().signInWithPopup(wb.auth).then(function(result) {\r\n\t\t\t\t// wb.user.token = result.credential.accessToken;\r\n\t\t\t}).catch(function(error) {\r\n\t\t\t\tconsole.error(error);\r\n\t\t\t\t// var errorCode = error.code;\r\n\t\t\t\t// var errorMessage = error.message;\r\n\t\t\t\t// var email = error.email;\r\n\t\t\t\t// var credential = error.credential;\r\n\t\t\t});\r\n\t\t\tconsole.log(firebase.auth().currentUser);\r\n\t\t},\r\n\t\t\r\n\t\tlogout: async () => {\r\n\t\t\twb.user.token = undefined;\r\n\t\t\tawait firebase.auth().signOut().then( () => {\r\n\t\t\t\twindow.location.pathname=\"/\";\r\n\t\t\t});\r\n\t\t},\r\n\t\t\t\t\r\n\t},\r\n\r\n\tcapitalizeFirst: str => str[0].toUpperCase()+str.substr(1),\r\n\t\r\n\tdeleteData: async (collection, id) => {\r\n\t\twb.db.collection(collection).doc(id).delete().then(function() {\r\n\t\t\tconsole.log(\"Document successfully deleted!\");\r\n\t\t\treturn true;\r\n\t\t}).catch(function(error) {\r\n\t\t\tconsole.error(\"Error removing document: \", error);\r\n\t\t});\r\n\t\treturn false;\r\n\t},\r\n\t\r\n\tgetCharacterListData: (character, edit) => {\r\n\t\tconst editFields = [\r\n\t\t\t\"race\",\r\n\t\t\t\"subrace\",\r\n\t\t\t\"sex\",\r\n\t\t\t\"class\",\r\n\t\t\t\"subclass\",\r\n\t\t\t\"title\",\r\n\t\t\t\"homeland\",\r\n\t\t\t\"faction\",\r\n\t\t\t\"summary\",\r\n\t\t]\r\n\t\tlet data=[];\r\n\t\tif (edit)\r\n\t\t\teditFields.forEach( e => {\r\n\t\t\t\tdata.push({\r\n\t\t\t\t\ttitle: character.data[e]?character.data[e]:\"\",\r\n\t\t\t\t\tsubtitle: e,\r\n\t\t\t\t\tclickable: false,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\telse {\r\n\t\t\tif (character.data.homeland) data.push({\r\n\t\t\t\ttitle: character.data.homeland,\r\n\t\t\t\tsubtitle: \"HOMELAND\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: \"/location?name=\"+character.data.homeland\r\n\t\t\t});\r\n\t\t\tif (character.data.faction) data.push({\r\n\t\t\t\ttitle: character.data.faction,\r\n\t\t\t\tsubtitle: \"FACTION\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: \"/faction?name=\"+character.data.faction\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn data;\r\n\t},\r\n\t\r\n\tgetDoc: async (doc) => wb.db.collection(doc).get().then(r => r.docs.map(o => {return {id: o.id, data: o.data()};})),\r\n\t\r\n\tgetEditFields: (page, data) => {\r\n\t\tlet model = undefined;\r\n\t\tswitch (page) {\r\n\t\t\tcase \"/character\":\r\n\t\t\t\tmodel = wbmodels.person;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"/faction\":\r\n\t\t\t\tmodel = wbmodels.faction;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"/history\":\r\n\t\t\t\tmodel = wbmodels.event;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"/location\":\r\n\t\t\t\tmodel = wbmodels.location;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tconsole.log(data);\r\n\t\treturn ( data ? \r\n\t\t\tObject.getOwnPropertyNames(model).map( (o) => { return { title: ( o === \"name\" ? data.id : data.data[o] ), subtitle: o, type: model[o], clickable: false }; })\r\n\t\t:\r\n\t\t\tObject.getOwnPropertyNames(model).map( (o) => { return { title: \"\", subtitle: o, type: model[o], clickable: false }; })\r\n\t\t);\r\n\t},\r\n\t\r\n\tgetPageData: async (page, options) => {\r\n\t\tswitch (page) {\r\n\t\t\tcase \"/people\":\r\n\t\t\tcase \"/character\":\r\n\t\t\t\treturn await wb.getDoc(\"characters\");\r\n\t\t\tcase \"/location\":\r\n\t\t\tcase \"/world\":\r\n\t\t\t\treturn await wb.getDoc(\"locations\");\r\n\t\t\tcase \"/faction\": \r\n\t\t\t\treturn await wb.getDoc(\"factions\");\r\n\t\t\tdefault:\r\n\t\t\t\treturn null;\r\n\t\t};\r\n\t},\r\n\t\r\n\tgetParentNation: (place, data) => typeof(place)===\"undefined\"?undefined:(place.data.type===\"Nation\"?place:wb.getParentNation(data.find(o => o.id === place.data.parent),data)),\r\n\r\n\tgetUnique: arr => arr.filter((o,i) => arr.indexOf(o) === i),\r\n\t\r\n\tgetUser: () => firebase.auth().currentUser,\r\n\t\r\n\tinit: () => {\r\n\t\tfirebase.initializeApp(firebaseConfig);\r\n\t\t\r\n\t\twb.db = firebase.firestore();\r\n\t\t\r\n\t\twb.auth = new firebase.auth.GoogleAuthProvider();\r\n\t\tfirebase.auth().useDeviceLanguage();\r\n\t\t\r\n\t},\r\n\t\r\n\tlist: {\r\n\t\tindex: [\r\n\t\t\t{\r\n\t\t\t\ttitle: \"The World\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: \"/world\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"Factions\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: \"/faction\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"People\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: \"/people\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"History\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: \"/history\",\r\n\t\t\t},\r\n\t\t],\r\n\t\tpeople: [\r\n\t\t\t{\r\n\t\t\t\ttitle: \"By Race\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: \"/people?sort=race\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"By Class\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: \"/people?sort=class\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"Alphabetical\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: \"/people?sort=alpha\",\r\n\t\t\t},\r\n\t\t],\r\n\t\tworld: [\r\n\t\t\t{\r\n\t\t\t\ttitle: \"Nations\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: \"/world?type=nation\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"Historical\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: \"/world?type=historical\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"Alphabetical\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: \"/world?sort=alpha\"\r\n\t\t\t},\r\n\t\t],\r\n\t},\r\n\t\r\n\tsaveData: async (path, id, data, oldID) => {\r\n\t\tswitch(path) {\r\n\t\t\tcase \"/character\":\r\n\t\t\t\t\tawait wb.db.collection(\"characters\").doc(id).set(data).then(async () => {\r\n\t\t\t\t\t\tconsole.log(\"Data saved!\");\r\n\t\t\t\t\t\tif(oldID) await wb.deleteData(\"characters\", oldID);\r\n\t\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"/faction\":\r\n\t\t\t\t\tawait wb.db.collection(\"factions\").doc(id).set(data).then(async () => {\r\n\t\t\t\t\t\tconsole.log(\"Data saved!\");\r\n\t\t\t\t\t\tif(oldID) await wb.deleteData(\"factions\", oldID);\r\n\t\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"/history\":\r\n\t\t\t\t\tawait wb.db.collection(\"events\").doc(id).set(data).then(async () => {\r\n\t\t\t\t\t\tconsole.log(\"Data saved!\");\r\n\t\t\t\t\t\tif(oldID) await wb.deleteData(\"events\", oldID);\r\n\t\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"/location\":\r\n\t\t\t\t\tawait wb.db.collection(\"locations\").doc(id).set(data).then(async () => {\r\n\t\t\t\t\t\tconsole.log(\"Data saved!\");\r\n\t\t\t\t\t\tif(oldID) await wb.deleteData(\"locations\", oldID);\r\n\t\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\t\r\n\tsortByLastName: names => names.sort(function(a,b) {\r\n\t\tlet aLast=undefined, bLast=undefined;\r\n\t\tif (typeof(a)===\"string\")\r\n\t\t\taLast=a.split(\" \")[a.split(\" \").length-1];\r\n\t\telse\r\n\t\t\taLast=a.id.split(\" \")[a.id.split(\" \").length-1];\r\n\t\tif (typeof(b)===\"string\")\r\n\t\t\tbLast=b.split(\" \")[b.split(\" \").length-1];\r\n\t\telse\r\n\t\t\tbLast=b.id.split(\" \")[b.id.split(\" \").length-1];\r\n\t\t\t\t\treturn aLast > bLast ? 1 : bLast > aLast ? -1 : 0;\r\n\t\t\t\t}),\r\n\r\n};\r\n\r\nexport default wb;\r\n// window.onload(() => {wb.init();});\r\n\r\n\r\n// window.onload(() => {console.log(\"window.onload\");});","import React from \"react\";\nimport \"./App.css\";\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\nimport wb from \"./worldbuild.js\";\n\nconst rt = \"/wb\";\n\nconst parseFormData = () => {\n\tlet data = {};\n\tArray.from(document.getElementById(\"editForm\").getElementsByTagName(\"input\")).forEach(o => { if (o.name) data[o.name] = o.value; });\n\treturn data;\n};\n\nconst parseParams = params => {\n\tlet out = {};\n\tparams = params.substring(1);\n\tparams=params.split(\"&\");\n\tparams.forEach( e => {\n\t\te = e.split(\"=\");\n\t\tif ( e.length === 1 )\n\t\t\tout[e[0]] = true;\n\t\telse if ( e.length === 2 )\n\t\t\tout[e[0]] = e[1];\n\t});\n\treturn out;\n};\n\nconst saveData = async (data, event) => {\n\tlet formData=parseFormData();\n\tlet params=parseParams(window.location.search);\n\tlet name=formData.name\n\t\n\tconsole.log(wb.user);\n\t\n\tif ( !params.name) {\n\t\tdelete formData.name;\n\t\twb.saveData(window.location.pathname, name, formData).then(() => { window.location.search=\"?name=\" + name; } );\n\t} else if(formData.name === params.name ) {\n\t\tdelete formData.name;\n\t\twb.saveData(window.location.pathname, params.name, formData).then(() => { window.location.search=window.location.search.replace(/&*edit=true/,''); } );\t\t\n\t} else if (data[formData.name]) {\n\t\talert(\"Error: Could not save information.  A document with the name \" + formData.name + \" already exists.\");\n\t\tconsole.error(\"Could not save information.  A document with the name \" + formData.name + \" already exists.\");\n\t} else {\n\t\tdelete formData.name;\n\t\twb.saveData(window.location.pathname, name, formData, params.name).then(() => { window.location.search=window.location.search=\"?name=\" + encodeURIComponent(name)} );\n\t}\n};\n\nconst App = () => (\n\t<div className=\"App\">\n\t\t<Router>\n\t\t\t<Route path={rt+\"/\"} exact component={Index} />\n\t\t\t<Route path={rt+\"/character\"} component={Character} />\n\t\t\t<Route path={rt+\"/faction\"} component={Faction} />\n\t\t\t<Route path={rt+\"/history\"} component={History} />\n\t\t\t<Route path={rt+\"/location\"} component={Location} />\n\t\t\t<Route path={rt+\"/people\"} component={People} />\n\t\t\t<Route path={rt+\"/signin\"} component={SignIn} />\n\t\t\t<Route path={rt+\"/signout\"} component={SignOut} />\n\t\t\t<Route path={rt+\"/world\"} component={World} />\n\t\t</Router>\n\t</div>\n);\n\nconst EditField = (props) => {\n\tswitch (props.type) {\n\t\tcase \"textarea\":\n\t\t\treturn ( <textarea name={props.subtitle} type=\"text\" className=\"TextField-Large\" placeholder={ props.title ? props.title : \"Add a description...\" } datafield=\"text\" /> );\n\t\tcase \"number\":\n\t\tcase \"string\":\n\t\tdefault:\n\t\t\treturn ( <input type=\"text\" name={props.subtitle} className=\"ListEditField\" defaultValue={props.title} /> );\n\t}\n};\n\nconst EditPage = (props) => (\n\t\t\t<>\n\t\t\t\t<HeaderBar str=\"Edit\" />\n\t\t\t\t<div id=\"editForm\">\n\t\t\t\t\t<List data={wb.getEditFields(window.location.pathname, props.doc)} edit />\n\t\t\t\t\t<div className=\"EditButtons\">\n\t\t\t\t\t\t{ /* <button onClick={ () => { window.location.search=window.location.search.replace(/&*edit=true/,'');} } >DISCARD</button> */ }\n\t\t\t\t\t\t<div  style={{height:\"20px\", width:\"20px\", borderRadius:\"10px\", backgroundColor:\"blue\"}} onClick={() => {saveData(props.data);} }> </div>\n\t\t\t\t\t\t<button onClick={() => { saveData(props.data); } }> SAVE </button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</>\n);\n\nconst HeaderBar = (props) => (\n\t<div className=\"HeaderBar\">\n\t\t<div className=\"left\"> {\n\t\t\twindow.location.pathname === \"/\" ?\n\t\t\t\t([]) : (<HomeButton />)\n\t\t} </div>\n\t\t<div className=\"center\">\n\t\t\t<div className=\"HeaderTitle\">\n\t\t\t\t{props.str}\n\t\t\t</div>\n\t\t</div>\n\t\t<div className=\"right\"> {\n\t\t\twindow.location.pathname === \"/signin\" ?\n\t\t\t\t([]) : <Menu type={props.menuType} />\n\t\t} </div>\n\t</div>\n);\n\nconst HomeButton = (props) => (\n\t<a href=\"./\">\n\t\t<span className=\"HeaderButton\">\n\t\t\t&lt; HOME\n\t\t</span>\n\t</a>\n);\n\nconst Index = (props) => (\n\t<>\n\t\t<HeaderBar str=\"Lott\" />\n\t\t<List data={wb.list.index} />\n\t</>\n);\n\nconst List = (props) =>\n\tprops.data.map( (o,i) => <ListItem {...o} edit={props.edit} key={i} /> );\n\t// props.data.map( (o,i) => <ListItem title={o.title} subtitle={o.subtitle} clickable={o.clickable} page={o.page} edit={props.edit} type={o.type} key={i}/>);\n\t\nconst ListItem = (props) => (\n\tprops.edit ?\n\t\t\t<div className=\"ListItem\">\n\t\t\t\t<div className=\"center\">\n\t\t\t\t\t<EditField {...props} />\n\t\t\t\t\t<span className=\"ListSubtitle\">\n\t\t\t\t\t\t{props.subtitle}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t:\n\t\tprops.clickable ?\n\t\t\t<Link to={props.page}>\n\t\t\t\t<div className=\"ListItem\">\n\t\t\t\t\t<div className=\"center\">\n\t\t\t\t\t\t<span className=\"ListTitle\">\n\t\t\t\t\t\t\t{props.title}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{props.subtitle?\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t<span className=\"ListSubtitle\">\n\t\t\t\t\t\t\t\t\t{props.subtitle}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t) : ( [] )\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"right\" style={{color: \"lightgray\"}}>\n\t\t\t\t\t\t&gt;\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Link>\n\t\t:\n\t\t\t<div className=\"ListItem\">\n\t\t\t\t<div className=\"center\">\n\t\t\t\t\t<span className=\"ListTitle\">\n\t\t\t\t\t\t{props.title}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span className=\"ListSubtitle\">\n\t\t\t\t\t\t{props.subtitle}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n);\n\nconst SignOut = () => (\n\t<>\n\t\t{wb.user.logout()}\n\t</>\n);\n\nconst UniqueList = (props) => (\n\t<List data = {\n\t\twb.getUnique(props.data.map(o => o ? Array.isArray(o) ? o[0] : o : \"Other\")).sort().map(o => {return {title: wb.capitalizeFirst(o), clickable:props.clickable, page: props.page + o};})\n\t} />\n);\n\n// CLASSES //\n\nclass Page extends React.Component {\n\t\n\tconstructor(props) {\n\t\t\tsuper(props);\n\t\t\tthis.state = {\n\t\t\t\tdata: undefined,\n\t\t\t\tparams: parseParams(window.location.search),\n\t\t\t};\n\t}\n\t\n\tcomponentDidMount() {\n\t\twb.getPageData(window.location.pathname).then(r=>{\n\t\t\tthis.setState({data: r});\n\t\t});\n\t}\n\t\n\tcomponentDidUpdate(prevProps) {\n\t\tif (this.props.location !== prevProps.location) this.setState({params: parseParams(window.location.search)});\n\t}\n\t\n};\n\nclass Character extends Page {\n\trender(props) {\n\t\tlet isEditMode = wb.getUser() && this.state.params.edit===\"true\";\n\t\tif (this.state.data) {\n\t\t\tif (this.state.params.name) {\n\t\t\t\tif ( !(this.state.params.edit===\"true\") === !isEditMode ) {\n\t\t\t\t\tlet activeID = this.state.data.find( o => o.id === decodeURIComponent(this.state.params.name) );\n\t\t\t\t\tif (activeID) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\tisEditMode ? \n\t\t\t\t\t\t\t\t<EditPage data={this.state.data} doc={activeID} />\n\t\t\t\t\t\t\t: (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<HeaderBar str={activeID.data.title?activeID.data.title+\" \"+activeID.id:activeID.id} menuType=\"character\"/>\n\t\t\t\t\t\t\t\t\t<div className=\"Text subtle\">\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\twb.capitalizeFirst((activeID.data.subrace ? activeID.data.subrace:activeID.data.race) + \" \" + \n\t\t\t\t\t\t\t\t\t\t(activeID.data.subclass ? activeID.data.subclass : activeID.data.class ? activeID.data.class : \"\" ))\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<List data = {wb.getCharacterListData(activeID,isEditMode)} edit={isEditMode} />\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t<div className=\"Text\">\n\t\t\t\t\t\t\t\t\t\t{ activeID.data.text?activeID.data.text:activeID.data.summary?activeID.data.summary:\"\" }\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t} else return (\n\t\t\t\t\t\t<div className=\"Text\">\n\t\t\t\t\t\t\tError: {decodeURIComponent(this.state.params.name)} not found.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t} else if (this.state.params.edit===\"true\") return (\n\t\t\t\t\t<div className=\"Text\">\n\t\t\t\t\t\tError: You must be logged in to edit this page.\n\t\t\t\t\t</div>\n\t\t\t\t); else return (\n\t\t\t\t\t<div className=\"Text\">\n\t\t\t\t\t\tError: How did you even do this?  This code shouldn't even be reachable.\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t} else return(\n\t\t\t\tisEditMode ?\n\t\t\t\t\t<EditPage data={this.state.data} doc={undefined} />\n\t\t\t\t:\n\t\t\t\t\t<div className=\"Text\">\n\t\t\t\t\t\tError: Parameter \"name\" missing.\n\t\t\t\t\t</div>\n\t\t\t);\n\t\t} else return ( <div> Loading... </div> );\n\t}\n}\n\nclass Faction extends Page {\n\trender() {\n\t\tlet isEditMode = wb.getUser() && this.state.params.edit===\"true\";\n\t\tif (this.state.data) {\n\t\t\tif (this.state.params.name) {\n\t\t\t\tif ( ( this.state.params.edit !== \"true\" ) === !isEditMode ) {\n\t\t\t\t\tlet activeID = this.state.data.find( o => o.id === decodeURIComponent(this.state.params.name) );\n\t\t\t\t\tif (activeID) {\n\t\t\t\t\t\tif (this.state.params.list===\"hierarchy\")\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<HeaderBar str={\"Hierarchy of \"+activeID.id} menuType=\"faction\"/>\n\t\t\t\t\t\t\t\t\t<List data={Object.getOwnPropertyNames(activeID.data.hierarchy).map(s => { return { title: s, subtitle: activeID.data.hierarchy[s].summary, clickable: true, page: \"/people?faction=\"+encodeURIComponent(activeID.id)+\"&title=\"+encodeURIComponent(s) }})} />\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\telse return (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<HeaderBar str={activeID.id} menuType=\"faction\"/>\n\t\t\t\t\t\t\t\t<div className=\"Text\">{activeID.data.summary}</div>\n\t\t\t\t\t\t\t\t<List data={\n\t\t\t\t\t\t\t\t\t[{\n\t\t\t\t\t\t\t\t\t\ttitle: \"Hierarchy\",\n\t\t\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\t\t\tpage: \"/faction?name=\"+activeID.id+\"&list=hierarchy\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: \"Members\",\n\t\t\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\t\t\tpage: \"/people?faction=\"+activeID.id,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t} />\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t} else return (\n\t\t\t\t\t\t<div className=\"Text\">\n\t\t\t\t\t\t\tError: {decodeURIComponent(this.state.params.name)} not found.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t} else if ( this.state.params.edit===\"true\" ) return (\n\t\t\t\t\t<div className=\"Text\" >\n\t\t\t\t\t\tError: You must be logged in to edit this page.\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t} else return(\n\t\t\t\tisEditMode ?\n\t\t\t\t\t<EditPage data={this.state.data} doc={{}} />\n\t\t\t\t:\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"Factions\" menuType=\"faction\"/>\n\t\t\t\t\t\t<List data={this.state.data.map( o => { return { title: o.id, subtitle: o.data.summary, clickable: true, page: \"/faction?name=\"+encodeURIComponent(o.id) }; })} />\n\t\t\t\t\t</>\n\t\t\t);\n\t\t} else return (<div> Loading... </div>);\n\t}\n}\n\nclass History extends Page {\n\trender() {\n\t\tlet isEditMode = wb.getUser() && this.state.params.edit===\"true\";\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<HeaderBar str=\"History\" menuType=\"event\"/>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nclass Location extends Page {\n\trender() {\n\t\tlet isEditMode = wb.getUser() && this.state.params.edit===\"true\";\n\t\tif (this.state.data) {\n\t\t\tif (this.state.params.name) {\n\t\t\t\tif ( !(this.state.params.edit===\"true\") === !isEditMode ) {\n\t\t\t\t\tlet activeID = this.state.data.find( o => o.id === decodeURIComponent(this.state.params.name) );\n\t\t\t\t\tif (activeID) {\n\t\t\t\t\t\tif (isEditMode) return (\n\t\t\t\t\t\t\t<EditPage data={this.state.data} doc={activeID} />\n\t\t\t\t\t\t); else if (activeID.data.type === \"Nation\") {\n\t\t\t\t\t\t\tif (this.state.params.list === \"city\") {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<HeaderBar str={\"Cities of \" + activeID.id} menuType=\"location\"/>\n\t\t\t\t\t\t\t\t\t\t<List data={this.state.data.filter(o => o.data.type===\"City\" && wb.getParentNation(o, this.state.data)!==undefined && wb.getParentNation(o, this.state.data).id === activeID.id).map(o => {return {title: o.id, subtitle: o.summary, clickable: true, page: \"/location?name=\"+encodeURIComponent(o.id)};})} />\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (this.state.params.list === \"region\") {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<HeaderBar str={\"Regions of \" + activeID.id} menuType=\"location\"/>\n\t\t\t\t\t\t\t\t\t\t<List data={this.state.data.filter(o => o.data.type===\"Region\" && wb.getParentNation(o, this.state.data)!==undefined && wb.getParentNation(o, this.state.data).id === activeID.id).map(o => {return {title: o.id, subtitle: o.summary, clickable: true, page: \"/location?name=\"+encodeURIComponent(o.id)};})} />\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (this.state.params.list === \"poi\") {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<HeaderBar str={\"Landmarks of \" + activeID.id} menuType=\"location\"/>\n\t\t\t\t\t\t\t\t\t\t<List data={this.state.data.filter(o => o.data.type===\"PoI\" && wb.getParentNation(o, this.state.data)!==undefined && wb.getParentNation(o, this.state.data).id === activeID.id).map(o => {return {title: o.id, subtitle: o.summary, clickable: true, page: \"/location?name=\"+encodeURIComponent(o.id)};})} />\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse return (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<HeaderBar str={activeID.id} menuType=\"location\"/>\n\t\t\t\t\t\t\t\t\t<List data={[\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"Cities\",\n\t\t\t\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\t\t\t\tpage: \"/location?name=\"+encodeURIComponent(activeID.id)+\"&list=city\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"Regions\",\n\t\t\t\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\t\t\t\tpage: \"/location?name=\"+encodeURIComponent(activeID.id)+\"&list=region\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"Other Points of Interest\",\n\t\t\t\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\t\t\t\tpage: \"/location?name=\"+encodeURIComponent(activeID.id)+\"&list=poi\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"Noteworthy Residents\",\n\t\t\t\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\t\t\t\tpage: \"/people?nation=\"+encodeURIComponent(activeID.id)\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t]} />\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t} else return (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<HeaderBar str={activeID.id} menuType=\"location\"/>\n\t\t\t\t\t\t\t\t\t<div>{activeID.data.summary}</div>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t} else return (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tError: {decodeURIComponent(this.state.params.name)} not found.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t} else if (this.state.params.edit===\"true\") return (\n\t\t\t\t\t<div className=\"Text\">\n\t\t\t\t\t\tError: You must be logged in to edit this page.\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t} else return(\n\t\t\t\tisEditMode ?\n\t\t\t\t\t<EditPage data={this.state.data} doc={{}} />\n\t\t\t\t:\n\t\t\t\t\t<div>\n\t\t\t\t\t\tError: Parameter \"name\" missing.\n\t\t\t\t\t</div>\n\t\t\t);\n\t\t} else return ( <div> Loading... </div> );\n\t}\n}\n\nclass Menu extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tparams: parseParams(window.location.search),\n\t\t\tisOpen: false,\n\t\t};\n\t}\n\t\n\ttoggleMenu() {\n\t\tthis.setState({isOpen: (!this.state.isOpen)});\n\t}\n\t\n\trender() {\n\t\treturn(\n\t\t\t<div className=\"Menu\">\n\t\t\t\t<span className=\"HeaderButton\" onClick={() => { this.toggleMenu(); } }> MENU </span>\n\t\t\t\t<div className=\"MenuBody\" style={{visibility: this.state.isOpen?\"visible\":\"hidden\"}}>\n\t\t\t\t\t<List data={wb.getUser() ? (\n\t\t\t\t\t\tthis.props.type ?\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: \"Sign Out\",\n\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\tpage: \"/signout\",\n\t\t\t\t\t\t\t}, // { title: \"Account\"... }\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: \"Edit Page\",\n\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\tpage: window.location.pathname + ( window.location.search ? window.location.search + \"&\" : \"?\" ) + \"edit=true\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: \"New \" + wb.capitalizeFirst(this.props.type),\n\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\tpage: \"/\"+ this.props.type + \"?edit=true\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]\n\t\t\t\t\t\t:\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: \"Sign Out\",\n\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\tpage: \"/signout\",\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t\t)\n\t\t\t\t\t:\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Sign In\",\n\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\tpage: \"/signin\",\n\t\t\t\t\t\t}\n\t\t\t\t\t]} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nclass People extends Page {\n\trender(props) {\n\t\tif (this.state.data) {\n\t\t\tif (this.state.params.race)\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str={wb.capitalizeFirst(decodeURIComponent(this.state.params.race))} menuType=\"character\"/>\n\t\t\t\t\t\t<List data = {\n\t\t\t\t\t\t\tthis.state.data.filter(o => o.data.race===decodeURIComponent(this.state.params.race)).map(o => { return {title: o.data.title?o.data.title+\" \"+o.id:o.id, subtitle: o.data.summary, clickable: true, page: \"/character?name=\"+encodeURIComponent(o.id)}; })\n\t\t\t\t\t\t} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\telse if (this.state.params.class)\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str={wb.capitalizeFirst(decodeURIComponent(this.state.params.class))} menuType=\"character\"/>\n\t\t\t\t\t\t<List data = {\n\t\t\t\t\t\t\tthis.state.data.filter(o => o.data.class===decodeURIComponent(this.state.params.class)).map(o => { return {title: o.data.title?o.data.title+\" \"+o.id:o.id, subtitle: o.data.summary, clickable: true, page: \"/character?name=\"+encodeURIComponent(o.id)}; })\n\t\t\t\t\t\t} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\telse if (this.state.params.nation)\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str={\"Residents of \" + decodeURIComponent(this.state.params.nation)} menuType=\"character\"/>\n\t\t\t\t\t\t<List data = {\n\t\t\t\t\t\t\tthis.state.data.filter(o => o.data.homeland===decodeURIComponent(this.state.params.nation)).map(o => { return {title: o.data.title?o.data.title+\" \"+o.id:o.id, subtitle: o.data.summary, clickable: true, page: \"/character?name=\"+encodeURIComponent(o.id)}; })\n\t\t\t\t\t\t} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\telse if (this.state.params.faction) {\n\t\t\t\tif (this.state.params.title)\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<HeaderBar str={decodeURIComponent(this.state.params.title)} menuType=\"character\"/>\n\t\t\t\t\t\t\t<List data = {\n\t\t\t\t\t\t\t\tthis.state.data.filter(o => o.data.faction===decodeURIComponent(this.state.params.faction) && o.data.title===decodeURIComponent(this.state.params.title)).map(o => { return {title: o.data.title?o.data.title+\" \"+o.id:o.id, subtitle: o.data.summary, clickable: true, page: \"/character?name=\"+encodeURIComponent(o.id)}; })\n\t\t\t\t\t\t\t} />\n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\telse return (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str={\"Residents of \" + decodeURIComponent(this.state.params.nation)} menuType=\"character\"/>\n\t\t\t\t\t\t<List data = {\n\t\t\t\t\t\t\tthis.state.data.filter(o => o.data.faction===decodeURIComponent(this.state.params.faction)).map(o => { return {title: o.data.title?o.data.title+\" \"+o.id:o.id, subtitle: o.data.summary, clickable: true, page: \"/character?name=\"+encodeURIComponent(o.id)}; })\n\t\t\t\t\t\t} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\t} else if (this.state.params.sort === \"alpha\")\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"People - Alphabetical\" menuType=\"character\"/>\n\t\t\t\t\t\t<List data = {\n\t\t\t\t\t\t\twb.sortByLastName(this.state.data).map(o => { return {title: o.data.title?o.data.title+\" \"+o.id:o.id, subtitle: o.data.summary, clickable: true, page: \"/character?name=\"+encodeURIComponent(o.id)}; })\n\t\t\t\t\t\t} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\telse if (this.state.params.sort === \"class\")\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"People by Class\" menuType=\"character\"/>\n\t\t\t\t\t\t<UniqueList data = {\n\t\t\t\t\t\t\tthis.state.data.map(o => o.data.class)\n\t\t\t\t\t\t} clickable={true} page=\"/people?class=\" />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\telse if (this.state.params.sort === \"race\")\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"People by Race\" menuType=\"character\"/>\n\t\t\t\t\t\t<UniqueList data = {\n\t\t\t\t\t\t\tthis.state.data.map(o => o.data.race)\n\t\t\t\t\t\t} clickable={true} page=\"/people?race=\" />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\telse  return (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"People\" menuType=\"character\"/>\n\t\t\t\t\t\t<List data={wb.list.people} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t}\n\t\telse return (<div> Loading... </div>);\n\t}\n};\n\nclass SignIn extends React.Component {\n\t/*constructor(props) {\n\t\tsuper(props);\n\t}*/\n\t\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<HeaderBar str=\"Sign In\" />\n\t\t\t\t<button onClick={wb.user.login}>Sign in with Google.</button>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nclass World extends Page {\n\trender(props) {\n\t\tif (this.state.data) {\n\t\t\tif (this.state.params.type === \"nation\")\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"Nations\" menuType=\"location\"/>\n\t\t\t\t\t\t<List data={this.state.data.filter(o => o.data.type===\"Nation\").map(o => {return {title: o.id, subtitle: o.data.summary, clickable: true, page: \"/location?name=\"+encodeURIComponent(o.id)};})} />\n\t\t\t\t\t</>\n\t\t\t\t)\n\t\t\telse if (this.state.params.type === \"historical\")\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"Historical Locations\" menuType=\"location\"/>\n\t\t\t\t\t\t<List data={this.state.data.filter(o => (o.data.subtype && o.data.subtype.includes(\"Historical\"))).map(o => {return {title: o.id, subtitle: o.data.summary, clickable: true, page: \"/location?name=\"+encodeURIComponent(o.id)};})} />\n\t\t\t\t\t</>\n\t\t\t\t)\n\t\t\telse if (this.state.params.sort === \"alpha\")\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"Historical Locations\" menuType=\"location\"/>\n\t\t\t\t\t\t<List data={this.state.data.sort((a,b) => [a.id, b.id].sort()).map(o => {return {title: o.id, subtitle: o.data.summary, clickable: true, page: \"/location?name=\"+encodeURIComponent(o.id)};})} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\telse return (\n\t\t\t\t<>\n\t\t\t\t\t<HeaderBar str=\"The World\" menuType=\"location\"/>\n\t\t\t\t\t<List data={wb.list.world} />\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\t\telse return (<div> Loading... </div>);\n\t}\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport wb from \"./worldbuild\"\n\nwb.init();\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}