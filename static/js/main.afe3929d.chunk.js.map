{"version":3,"sources":["models.js","worldbuild.js","App.js","serviceWorker.js","index.js"],"names":["wbmodels","event","name","era","year","month","text","faction","hierarchy","rank","summary","display","parent","tags","location","type","subtype","person","title","race","subrace","sex","class","subclass","homeland","traits","abilities","Str","Dex","Con","Int","Wis","Cha","speed","languages","skills","feat","firebase","require","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","ROOTPATH","window","hostname","wb","rt","db","undefined","auth","user","token","login","_login","Object","asyncToGenerator","regenerator_default","a","mark","_callee","wrap","_context","prev","next","signInWithPopup","then","result","catch","error","console","log","currentUser","stop","apply","this","arguments","logout","_logout","_callee2","_context2","signOut","pathname","capitalizeFirst","str","toUpperCase","substr","deleteData","_deleteData","_callee3","collection","id","_context3","doc","delete","abrupt","_x","_x2","getCharacterListData","character","edit","data","forEach","e","push","subtitle","clickable","page","getDoc","_getDoc","_callee4","_context4","get","r","docs","map","o","_x3","getEditFields","model","getOwnPropertyNames","getPageData","_getPageData","_callee5","options","_context5","t0","sent","_x4","_x5","getParentNation","place","find","getUnique","arr","filter","i","indexOf","getUser","init","initializeApp","firestore","GoogleAuthProvider","useDeviceLanguage","list","index","people","world","saveData","_saveData","_callee10","path","oldID","_context10","set","_callee6","_context6","_callee7","_context7","_callee8","_context8","_callee9","_context9","_x6","_x7","_x8","_x9","sortByLastName","names","sort","b","aLast","bLast","split","length","parseFormData","Array","from","document","getElementById","getElementsByTagName","value","parseParams","params","out","substring","_ref","formData","search","getRelativePath","replace","alert","encodeURIComponent","EditField","props","react_default","createElement","className","placeholder","datafield","defaultValue","EditPage","Fragment","App_HeaderBar","App_List","style","height","width","borderRadius","backgroundColor","onClick","HeaderBar","App_HomeButton","App_Menu","menuType","HomeButton","href","Index","List","App_ListItem","assign","key","ListItem","App_EditField","react_router_dom","to","color","SignOut","UniqueList","isArray","Page","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","_this2","setState","prevProps","React","Component","Character","_this3","isEditMode","activeID","decodeURIComponent","App_EditPage","Faction","_this4","s","History","Location","_this5","Menu","_this6","isOpen","_this7","toggleMenu","visibility","People","_this8","nation","App_UniqueList","SignIn","World","includes","App","react_router","exact","component","Boolean","match","ReactDOM","render","src_App_0","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.afe3929d.chunk.js","sourcesContent":["const wbmodels = {\r\n\tevent : {\r\n\t\tname : \"string\",\r\n\t\tera : [\"EP\", \"EM\", \"ET\", \"AF\"],\r\n\t\tyear : \"number\",\r\n\t\tmonth : \"number\",\r\n\t\ttext : \"textarea\",\r\n\t},\r\n\t\r\n\tfaction : {\r\n\t\tname : \"string\",\r\n\t\thierarchy : {\r\n\t\t\tname : \"string\",\r\n\t\t\trank : \"number\",\r\n\t\t\tsummary : \"string\",\r\n\t\t\tdisplay : \"boolean\",\r\n\t\t},\r\n\t\tparent : \"string\",\r\n\t\tsummary : \"string\",\r\n\t\ttext : \"textarea\",\r\n\t\ttags : \"array<string>\",\r\n\t},\r\n\t\r\n\tlocation : {\r\n\t\tname : \"string\",\r\n\t\tparent : \"string\",\r\n\t\ttype : [\"Nation\", \"City\", \"Region\", \"PoI\",],\r\n\t\tsubtype : \"string\",\r\n\t\tsummary : \"array<string>\",\r\n\t\ttags : \"array<string>\",\r\n\t\ttext : \"textarea\",\r\n\t},\r\n\t\r\n\tperson : {\r\n\t\tname : \"string\",\r\n\t\ttitle : \"string\",\r\n\t\trace: \"string\",\r\n\t\tsubrace: \"string\",\r\n\t\tsex : \"string\",\r\n\t\tclass : [\r\n\t\t\t\"\",\r\n\t\t\t\"Artificer\",\r\n\t\t\t\"Barbarian\",\r\n\t\t\t\"Bard\",\r\n\t\t\t\"Bloodhunter\",\r\n\t\t\t\"Cleric\",\r\n\t\t\t\"Druid\",\r\n\t\t\t\"Fighter\",\r\n\t\t\t\"Monk\",\r\n\t\t\t\"Paladin\",\r\n\t\t\t\"Ranger\",\r\n\t\t\t\"Rogue\",\r\n\t\t\t\"Sorcerer\",\r\n\t\t\t\"Warlock\",\r\n\t\t\t\"Wizard\",\r\n\t\t],\r\n\t\tsubclass : \"string\",\r\n\t\thomeland : \"string\",\r\n\t\tfaction : \"string\",\r\n\t\tsummary : \"string\",\r\n\t\ttags : \"array<string>\",\r\n\t\ttext : \"textarea\",\r\n\t},\r\n\t\r\n\trace : {\r\n\t\tname : \"string\",\r\n\t\ttype : [\"race\", \"subrace\"],\r\n\t\tparent : \"string\",\r\n\t\ttraits : \"array<trait>\",\r\n\t\tabilities : {\r\n\t\t\tStr : \"number\",\r\n\t\t\tDex : \"number\",\r\n\t\t\tCon : \"number\",\r\n\t\t\tInt : \"number\",\r\n\t\t\tWis : \"number\",\r\n\t\t\tCha : \"number\",\r\n\t\t},\r\n\t\tspeed : \"number\",\r\n\t\tlanguages : \"array<string/number>\",\r\n\t\tskills : \"string/number\",\r\n\t\tfeat : \"string/number\",\r\n\t\ttags : \"array<string>\"\r\n\t},\r\n};\r\n\r\nexport default wbmodels;","import wbmodels from \"./models\";\r\n\r\nconst firebase = require(\"firebase\");\r\nrequire(\"firebaseui\");\r\nrequire (\"firebase/firestore\");\r\n\r\nvar firebaseConfig = {\r\n\tapiKey: \"AIzaSyALa18rNIoBfvH6dK2cZTcK8zcaovF01lc\",\r\n\tauthDomain: \"worldbuild-3b59a.firebaseapp.com\",\r\n\tdatabaseURL: \"https://worldbuild-3b59a.firebaseio.com\",\r\n\tprojectId: \"worldbuild-3b59a\",\r\n\tstorageBucket: \"worldbuild-3b59a.appspot.com\",\r\n\tmessagingSenderId: \"944041908346\",\r\n\tappId: \"1:944041908346:web:4993f328632af2a2\"\r\n};\r\n\r\nconst ROOTPATH=window.location.hostname===\"localhost\"?\"/#\":\"/wb/#\";\r\n\r\nconst wb = {\r\n\t\r\n\trt: ROOTPATH,\r\n\t\r\n\tdb: undefined,\r\n\tauth: undefined,\r\n\r\n\tuser: {\r\n\t\ttoken: undefined,\r\n\t\t\r\n\t\tlogin: async () => {\r\n\t\t\tawait firebase.auth().signInWithPopup(wb.auth).then(function(result) {\r\n\t\t\t\t// wb.user.token = result.credential.accessToken;\r\n\t\t\t}).catch(function(error) {\r\n\t\t\t\tconsole.error(error);\r\n\t\t\t\t// var errorCode = error.code;\r\n\t\t\t\t// var errorMessage = error.message;\r\n\t\t\t\t// var email = error.email;\r\n\t\t\t\t// var credential = error.credential;\r\n\t\t\t});\r\n\t\t\tconsole.log(firebase.auth().currentUser);\r\n\t\t},\r\n\t\t\r\n\t\tlogout: async () => {\r\n\t\t\twb.user.token = undefined;\r\n\t\t\tawait firebase.auth().signOut().then( () => {\r\n\t\t\t\twindow.location.pathname=\"/\";\r\n\t\t\t});\r\n\t\t},\r\n\t\t\t\t\r\n\t},\r\n\r\n\tcapitalizeFirst: str => str[0].toUpperCase()+str.substr(1),\r\n\t\r\n\tdeleteData: async (collection, id) => {\r\n\t\twb.db.collection(collection).doc(id).delete().then(function() {\r\n\t\t\tconsole.log(\"Document successfully deleted!\");\r\n\t\t\treturn true;\r\n\t\t}).catch(function(error) {\r\n\t\t\tconsole.error(\"Error removing document: \", error);\r\n\t\t});\r\n\t\treturn false;\r\n\t},\r\n\t\r\n\tgetCharacterListData: (character, edit) => {\r\n\t\tconst editFields = [\r\n\t\t\t\"race\",\r\n\t\t\t\"subrace\",\r\n\t\t\t\"sex\",\r\n\t\t\t\"class\",\r\n\t\t\t\"subclass\",\r\n\t\t\t\"title\",\r\n\t\t\t\"homeland\",\r\n\t\t\t\"faction\",\r\n\t\t\t\"summary\",\r\n\t\t]\r\n\t\tlet data=[];\r\n\t\tif (edit)\r\n\t\t\teditFields.forEach( e => {\r\n\t\t\t\tdata.push({\r\n\t\t\t\t\ttitle: character.data[e]?character.data[e]:\"\",\r\n\t\t\t\t\tsubtitle: e,\r\n\t\t\t\t\tclickable: false,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\telse {\r\n\t\t\tif (character.data.homeland) data.push({\r\n\t\t\t\ttitle: character.data.homeland,\r\n\t\t\t\tsubtitle: \"HOMELAND\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/location?name=\"+character.data.homeland\r\n\t\t\t});\r\n\t\t\tif (character.data.faction) data.push({\r\n\t\t\t\ttitle: character.data.faction,\r\n\t\t\t\tsubtitle: \"FACTION\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/faction?name=\"+character.data.faction\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn data;\r\n\t},\r\n\t\r\n\tgetDoc: async (doc) => wb.db.collection(doc).get().then(r => r.docs.map(o => {return {id: o.id, data: o.data()};})),\r\n\t\r\n\tgetEditFields: (page, data) => {\r\n\t\tlet model = undefined;\r\n\t\tswitch (page) {\r\n\t\t\tcase \"/character\":\r\n\t\t\t\tmodel = wbmodels.person;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"/faction\":\r\n\t\t\t\tmodel = wbmodels.faction;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"/history\":\r\n\t\t\t\tmodel = wbmodels.event;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"/location\":\r\n\t\t\t\tmodel = wbmodels.location;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tconsole.log(data);\r\n\t\treturn ( data ? \r\n\t\t\tObject.getOwnPropertyNames(model).map( (o) => { return { title: ( o === \"name\" ? data.id : data.data[o] ), subtitle: o, type: model[o], clickable: false }; })\r\n\t\t:\r\n\t\t\tObject.getOwnPropertyNames(model).map( (o) => { return { title: \"\", subtitle: o, type: model[o], clickable: false }; })\r\n\t\t);\r\n\t},\r\n\t\r\n\tgetPageData: async (page, options) => {\r\n\t\tswitch (page) {\r\n\t\t\tcase \"/people\":\r\n\t\t\tcase \"/character\":\r\n\t\t\t\treturn await wb.getDoc(\"characters\");\r\n\t\t\tcase \"/location\":\r\n\t\t\tcase \"/world\":\r\n\t\t\t\treturn await wb.getDoc(\"locations\");\r\n\t\t\tcase \"/faction\": \r\n\t\t\t\treturn await wb.getDoc(\"factions\");\r\n\t\t\tdefault:\r\n\t\t\t\treturn null;\r\n\t\t};\r\n\t},\r\n\t\r\n\tgetParentNation: (place, data) => typeof(place)===\"undefined\"?undefined:(place.data.type===\"Nation\"?place:wb.getParentNation(data.find(o => o.id === place.data.parent),data)),\r\n\r\n\tgetUnique: arr => arr.filter((o,i) => arr.indexOf(o) === i),\r\n\t\r\n\tgetUser: () => firebase.auth().currentUser,\r\n\t\r\n\tinit: () => {\r\n\t\tfirebase.initializeApp(firebaseConfig);\r\n\t\t\r\n\t\twb.db = firebase.firestore();\r\n\t\t\r\n\t\twb.auth = new firebase.auth.GoogleAuthProvider();\r\n\t\tfirebase.auth().useDeviceLanguage();\r\n\t\t\r\n\t},\r\n\t\r\n\tlist: {\r\n\t\tindex: [\r\n\t\t\t{\r\n\t\t\t\ttitle: \"The World\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/world\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"Factions\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/faction\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"People\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/people\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"History\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/history\",\r\n\t\t\t},\r\n\t\t],\r\n\t\tpeople: [\r\n\t\t\t{\r\n\t\t\t\ttitle: \"By Race\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/people?sort=race\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"By Class\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/people?sort=class\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"Alphabetical\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/people?sort=alpha\",\r\n\t\t\t},\r\n\t\t],\r\n\t\tworld: [\r\n\t\t\t{\r\n\t\t\t\ttitle: \"Nations\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/world?type=nation\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"Historical\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/world?type=historical\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"Alphabetical\",\r\n\t\t\t\tclickable: true,\r\n\t\t\t\tpage: ROOTPATH+\"/world?sort=alpha\"\r\n\t\t\t},\r\n\t\t],\r\n\t},\r\n\t\r\n\tsaveData: async (path, id, data, oldID) => {\r\n\t\tswitch(path) {\r\n\t\t\tcase \"/character\":\r\n\t\t\t\t\tawait wb.db.collection(\"characters\").doc(id).set(data).then(async () => {\r\n\t\t\t\t\t\tconsole.log(\"Data saved!\");\r\n\t\t\t\t\t\tif(oldID) await wb.deleteData(\"characters\", oldID);\r\n\t\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"/faction\":\r\n\t\t\t\t\tawait wb.db.collection(\"factions\").doc(id).set(data).then(async () => {\r\n\t\t\t\t\t\tconsole.log(\"Data saved!\");\r\n\t\t\t\t\t\tif(oldID) await wb.deleteData(\"factions\", oldID);\r\n\t\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"/history\":\r\n\t\t\t\t\tawait wb.db.collection(\"events\").doc(id).set(data).then(async () => {\r\n\t\t\t\t\t\tconsole.log(\"Data saved!\");\r\n\t\t\t\t\t\tif(oldID) await wb.deleteData(\"events\", oldID);\r\n\t\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"/location\":\r\n\t\t\t\t\tawait wb.db.collection(\"locations\").doc(id).set(data).then(async () => {\r\n\t\t\t\t\t\tconsole.log(\"Data saved!\");\r\n\t\t\t\t\t\tif(oldID) await wb.deleteData(\"locations\", oldID);\r\n\t\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\t\r\n\tsortByLastName: names => names.sort(function(a,b) {\r\n\t\tlet aLast=undefined, bLast=undefined;\r\n\t\tif (typeof(a)===\"string\")\r\n\t\t\taLast=a.split(\" \")[a.split(\" \").length-1];\r\n\t\telse\r\n\t\t\taLast=a.id.split(\" \")[a.id.split(\" \").length-1];\r\n\t\tif (typeof(b)===\"string\")\r\n\t\t\tbLast=b.split(\" \")[b.split(\" \").length-1];\r\n\t\telse\r\n\t\t\tbLast=b.id.split(\" \")[b.id.split(\" \").length-1];\r\n\t\t\t\t\treturn aLast > bLast ? 1 : bLast > aLast ? -1 : 0;\r\n\t\t\t\t}),\r\n\r\n};\r\n\r\nexport default wb;\r\n// window.onload(() => {wb.init();});\r\n\r\n\r\n// window.onload(() => {console.log(\"window.onload\");});","import React from \"react\";\nimport \"./App.css\";\nimport { HashRouter as Router, Route, Link } from \"react-router-dom\";\nimport wb from \"./worldbuild.js\";\n\nconst rt = wb.rt;\n\nconst parseFormData = () => {\n\tlet data = {};\n\tArray.from(document.getElementById(\"editForm\").getElementsByTagName(\"input\")).forEach(o => { if (o.name) data[o.name] = o.value; });\n\treturn data;\n};\n\nconst parseParams = params => {\n\tlet out = {};\n\tparams = params.substring(1);\n\tparams=params.split(\"&\");\n\tparams.forEach( e => {\n\t\te = e.split(\"=\");\n\t\tif ( e.length === 1 )\n\t\t\tout[e[0]] = true;\n\t\telse if ( e.length === 2 )\n\t\t\tout[e[0]] = e[1];\n\t});\n\treturn out;\n};\n\nconst saveData = async (data, event) => {\n\tlet formData=parseFormData();\n\tlet params=parseParams(window.location.search);\n\tlet name=formData.name\n\t\n\tconsole.log(wb.user);\n\t\n\tif ( !params.name) {\n\t\tdelete formData.name;\n\t\twb.saveData(getRelativePath(window.location.pathname), name, formData).then(() => { window.location.search=\"?name=\" + name; } );\n\t} else if(formData.name === params.name ) {\n\t\tdelete formData.name;\n\t\twb.saveData(getRelativePath(window.location.pathname), params.name, formData).then(() => { window.location.search=window.location.search.replace(/&*edit=true/,''); } );\t\t\n\t} else if (data[formData.name]) {\n\t\talert(\"Error: Could not save information.  A document with the name \" + formData.name + \" already exists.\");\n\t\tconsole.error(\"Could not save information.  A document with the name \" + formData.name + \" already exists.\");\n\t} else {\n\t\tdelete formData.name;\n\t\twb.saveData(getRelativePath(window.location.pathname), name, formData, params.name).then(() => { window.location.search=window.location.search=\"?name=\" + encodeURIComponent(name)} );\n\t}\n};\n\nconst getRelativePath = (path) => path.replace(rt,\"\");\n\nconst App = () => (\n\t<div className=\"App\">\n\t\t<Router>\n\t\t\t<Route path={rt+\"/\"} exact component={Index} />\n\t\t\t<Route path={rt+\"/character\"} component={Character} />\n\t\t\t<Route path={rt+\"/faction\"} component={Faction} />\n\t\t\t<Route path={rt+\"/history\"} component={History} />\n\t\t\t<Route path={rt+\"/location\"} component={Location} />\n\t\t\t<Route path={rt+\"/people\"} component={People} />\n\t\t\t<Route path={rt+\"/signin\"} component={SignIn} />\n\t\t\t<Route path={rt+\"/signout\"} component={SignOut} />\n\t\t\t<Route path={rt+\"/world\"} component={World} />\n\t\t</Router>\n\t</div>\n);\n\nconst EditField = (props) => {\n\tswitch (props.type) {\n\t\tcase \"textarea\":\n\t\t\treturn ( <textarea name={props.subtitle} type=\"text\" className=\"TextField-Large\" placeholder={ props.title ? props.title : \"Add a description...\" } datafield=\"text\" /> );\n\t\tcase \"number\":\n\t\tcase \"string\":\n\t\tdefault:\n\t\t\treturn ( <input type=\"text\" name={props.subtitle} className=\"ListEditField\" defaultValue={props.title} /> );\n\t}\n};\n\nconst EditPage = (props) => (\n\t\t\t<>\n\t\t\t\t<HeaderBar str=\"Edit\" />\n\t\t\t\t<div id=\"editForm\">\n\t\t\t\t\t<List data={wb.getEditFields(getRelativePath(window.location.pathname), props.doc)} edit />\n\t\t\t\t\t<div className=\"EditButtons\">\n\t\t\t\t\t\t{ /* <button onClick={ () => { window.location.search=window.location.search.replace(/&*edit=true/,'');} } >DISCARD</button> */ }\n\t\t\t\t\t\t<div  style={{height:\"20px\", width:\"20px\", borderRadius:\"10px\", backgroundColor:\"blue\"}} onClick={() => {saveData(props.data);} }> </div>\n\t\t\t\t\t\t<button onClick={() => { saveData(props.data); } }> SAVE </button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</>\n);\n\nconst HeaderBar = (props) => (\n\t<div className=\"HeaderBar\">\n\t\t<div className=\"left\"> {\n\t\t\twindow.location.pathname === rt+\"/\" ?\n\t\t\t\t([]) : (<HomeButton />)\n\t\t} </div>\n\t\t<div className=\"center\">\n\t\t\t<div className=\"HeaderTitle\">\n\t\t\t\t{props.str}\n\t\t\t</div>\n\t\t</div>\n\t\t<div className=\"right\"> {\n\t\t\twindow.location.pathname === rt+\"/signin\" ?\n\t\t\t\t([]) : <Menu type={props.menuType} />\n\t\t} </div>\n\t</div>\n);\n\nconst HomeButton = (props) => (\n\t<a href=\"./\">\n\t\t<span className=\"HeaderButton\">\n\t\t\t&lt; HOME\n\t\t</span>\n\t</a>\n);\n\nconst Index = (props) => (\n\t<>\n\t\t<HeaderBar str=\"Lott\" />\n\t\t<List data={wb.list.index} />\n\t</>\n);\n\nconst List = (props) =>\n\tprops.data.map( (o,i) => <ListItem {...o} edit={props.edit} key={i} /> );\n\t// props.data.map( (o,i) => <ListItem title={o.title} subtitle={o.subtitle} clickable={o.clickable} page={o.page} edit={props.edit} type={o.type} key={i}/>);\n\t\nconst ListItem = (props) => (\n\tprops.edit ?\n\t\t\t<div className=\"ListItem\">\n\t\t\t\t<div className=\"center\">\n\t\t\t\t\t<EditField {...props} />\n\t\t\t\t\t<span className=\"ListSubtitle\">\n\t\t\t\t\t\t{props.subtitle}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t:\n\t\tprops.clickable ?\n\t\t\t<Link to={props.page}>\n\t\t\t\t<div className=\"ListItem\">\n\t\t\t\t\t<div className=\"center\">\n\t\t\t\t\t\t<span className=\"ListTitle\">\n\t\t\t\t\t\t\t{props.title}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{props.subtitle?\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t<span className=\"ListSubtitle\">\n\t\t\t\t\t\t\t\t\t{props.subtitle}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t) : ( [] )\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"right\" style={{color: \"lightgray\"}}>\n\t\t\t\t\t\t&gt;\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Link>\n\t\t:\n\t\t\t<div className=\"ListItem\">\n\t\t\t\t<div className=\"center\">\n\t\t\t\t\t<span className=\"ListTitle\">\n\t\t\t\t\t\t{props.title}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span className=\"ListSubtitle\">\n\t\t\t\t\t\t{props.subtitle}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n);\n\nconst SignOut = () => (\n\t<>\n\t\t{wb.user.logout()}\n\t</>\n);\n\nconst UniqueList = (props) => (\n\t<List data = {\n\t\twb.getUnique(props.data.map(o => o ? Array.isArray(o) ? o[0] : o : \"Other\")).sort().map(o => {return {title: wb.capitalizeFirst(o), clickable:props.clickable, page: props.page + o};})\n\t} />\n);\n\n// CLASSES //\n\nclass Page extends React.Component {\n\t\n\tconstructor(props) {\n\t\t\tsuper(props);\n\t\t\tthis.state = {\n\t\t\t\tdata: undefined,\n\t\t\t\tparams: parseParams(window.location.search),\n\t\t\t};\n\t}\n\t\n\tcomponentDidMount() {\n\t\twb.getPageData(getRelativePath(window.location.pathname)).then(r=>{\n\t\t\tthis.setState({data: r});\n\t\t});\n\t}\n\t\n\tcomponentDidUpdate(prevProps) {\n\t\tif (this.props.location !== prevProps.location) this.setState({params: parseParams(window.location.search)});\n\t}\n\t\n};\n\nclass Character extends Page {\n\trender(props) {\n\t\tlet isEditMode = wb.getUser() && this.state.params.edit===\"true\";\n\t\tif (this.state.data) {\n\t\t\tif (this.state.params.name) {\n\t\t\t\tif ( !(this.state.params.edit===\"true\") === !isEditMode ) {\n\t\t\t\t\tlet activeID = this.state.data.find( o => o.id === decodeURIComponent(this.state.params.name) );\n\t\t\t\t\tif (activeID) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\tisEditMode ? \n\t\t\t\t\t\t\t\t<EditPage data={this.state.data} doc={activeID} />\n\t\t\t\t\t\t\t: (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<HeaderBar str={activeID.data.title?activeID.data.title+\" \"+activeID.id:activeID.id} menuType=\"character\"/>\n\t\t\t\t\t\t\t\t\t<div className=\"Text subtle\">\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\twb.capitalizeFirst((activeID.data.subrace ? activeID.data.subrace:activeID.data.race) + \" \" + \n\t\t\t\t\t\t\t\t\t\t(activeID.data.subclass ? activeID.data.subclass : activeID.data.class ? activeID.data.class : \"\" ))\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<List data = {wb.getCharacterListData(activeID,isEditMode)} edit={isEditMode} />\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t<div className=\"Text\">\n\t\t\t\t\t\t\t\t\t\t{ activeID.data.text?activeID.data.text:activeID.data.summary?activeID.data.summary:\"\" }\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t} else return (\n\t\t\t\t\t\t<div className=\"Text\">\n\t\t\t\t\t\t\tError: {decodeURIComponent(this.state.params.name)} not found.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t} else if (this.state.params.edit===\"true\") return (\n\t\t\t\t\t<div className=\"Text\">\n\t\t\t\t\t\tError: You must be logged in to edit this page.\n\t\t\t\t\t</div>\n\t\t\t\t); else return (\n\t\t\t\t\t<div className=\"Text\">\n\t\t\t\t\t\tError: How did you even do this?  This code shouldn't even be reachable.\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t} else return(\n\t\t\t\tisEditMode ?\n\t\t\t\t\t<EditPage data={this.state.data} doc={undefined} />\n\t\t\t\t:\n\t\t\t\t\t<div className=\"Text\">\n\t\t\t\t\t\tError: Parameter \"name\" missing.\n\t\t\t\t\t</div>\n\t\t\t);\n\t\t} else return ( <div> Loading... </div> );\n\t}\n}\n\nclass Faction extends Page {\n\trender() {\n\t\tlet isEditMode = wb.getUser() && this.state.params.edit===\"true\";\n\t\tif (this.state.data) {\n\t\t\tif (this.state.params.name) {\n\t\t\t\tif ( ( this.state.params.edit !== \"true\" ) === !isEditMode ) {\n\t\t\t\t\tlet activeID = this.state.data.find( o => o.id === decodeURIComponent(this.state.params.name) );\n\t\t\t\t\tif (activeID) {\n\t\t\t\t\t\tif (this.state.params.list===\"hierarchy\")\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<HeaderBar str={\"Hierarchy of \"+activeID.id} menuType=\"faction\"/>\n\t\t\t\t\t\t\t\t\t<List data={Object.getOwnPropertyNames(activeID.data.hierarchy).map(s => { return { title: s, subtitle: activeID.data.hierarchy[s].summary, clickable: true, page: \"/people?faction=\"+encodeURIComponent(activeID.id)+\"&title=\"+encodeURIComponent(s) }})} />\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\telse return (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<HeaderBar str={activeID.id} menuType=\"faction\"/>\n\t\t\t\t\t\t\t\t<div className=\"Text\">{activeID.data.summary}</div>\n\t\t\t\t\t\t\t\t<List data={\n\t\t\t\t\t\t\t\t\t[{\n\t\t\t\t\t\t\t\t\t\ttitle: \"Hierarchy\",\n\t\t\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\t\t\tpage: \"/faction?name=\"+activeID.id+\"&list=hierarchy\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: \"Members\",\n\t\t\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\t\t\tpage: \"/people?faction=\"+activeID.id,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t} />\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t} else return (\n\t\t\t\t\t\t<div className=\"Text\">\n\t\t\t\t\t\t\tError: {decodeURIComponent(this.state.params.name)} not found.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t} else if ( this.state.params.edit===\"true\" ) return (\n\t\t\t\t\t<div className=\"Text\" >\n\t\t\t\t\t\tError: You must be logged in to edit this page.\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t} else return(\n\t\t\t\tisEditMode ?\n\t\t\t\t\t<EditPage data={this.state.data} doc={{}} />\n\t\t\t\t:\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"Factions\" menuType=\"faction\"/>\n\t\t\t\t\t\t<List data={this.state.data.map( o => { return { title: o.id, subtitle: o.data.summary, clickable: true, page: \"/faction?name=\"+encodeURIComponent(o.id) }; })} />\n\t\t\t\t\t</>\n\t\t\t);\n\t\t} else return (<div> Loading... </div>);\n\t}\n}\n\nclass History extends Page {\n\trender() {\n\t\tlet isEditMode = wb.getUser() && this.state.params.edit===\"true\";\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<HeaderBar str=\"History\" menuType=\"event\"/>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nclass Location extends Page {\n\trender() {\n\t\tlet isEditMode = wb.getUser() && this.state.params.edit===\"true\";\n\t\tif (this.state.data) {\n\t\t\tif (this.state.params.name) {\n\t\t\t\tif ( !(this.state.params.edit===\"true\") === !isEditMode ) {\n\t\t\t\t\tlet activeID = this.state.data.find( o => o.id === decodeURIComponent(this.state.params.name) );\n\t\t\t\t\tif (activeID) {\n\t\t\t\t\t\tif (isEditMode) return (\n\t\t\t\t\t\t\t<EditPage data={this.state.data} doc={activeID} />\n\t\t\t\t\t\t); else if (activeID.data.type === \"Nation\") {\n\t\t\t\t\t\t\tif (this.state.params.list === \"city\") {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<HeaderBar str={\"Cities of \" + activeID.id} menuType=\"location\"/>\n\t\t\t\t\t\t\t\t\t\t<List data={this.state.data.filter(o => o.data.type===\"City\" && wb.getParentNation(o, this.state.data)!==undefined && wb.getParentNation(o, this.state.data).id === activeID.id).map(o => {return {title: o.id, subtitle: o.summary, clickable: true, page: \"/location?name=\"+encodeURIComponent(o.id)};})} />\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (this.state.params.list === \"region\") {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<HeaderBar str={\"Regions of \" + activeID.id} menuType=\"location\"/>\n\t\t\t\t\t\t\t\t\t\t<List data={this.state.data.filter(o => o.data.type===\"Region\" && wb.getParentNation(o, this.state.data)!==undefined && wb.getParentNation(o, this.state.data).id === activeID.id).map(o => {return {title: o.id, subtitle: o.summary, clickable: true, page: \"/location?name=\"+encodeURIComponent(o.id)};})} />\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (this.state.params.list === \"poi\") {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<HeaderBar str={\"Landmarks of \" + activeID.id} menuType=\"location\"/>\n\t\t\t\t\t\t\t\t\t\t<List data={this.state.data.filter(o => o.data.type===\"PoI\" && wb.getParentNation(o, this.state.data)!==undefined && wb.getParentNation(o, this.state.data).id === activeID.id).map(o => {return {title: o.id, subtitle: o.summary, clickable: true, page: \"/location?name=\"+encodeURIComponent(o.id)};})} />\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse return (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<HeaderBar str={activeID.id} menuType=\"location\"/>\n\t\t\t\t\t\t\t\t\t<List data={[\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"Cities\",\n\t\t\t\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\t\t\t\tpage: \"/location?name=\"+encodeURIComponent(activeID.id)+\"&list=city\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"Regions\",\n\t\t\t\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\t\t\t\tpage: \"/location?name=\"+encodeURIComponent(activeID.id)+\"&list=region\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"Other Points of Interest\",\n\t\t\t\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\t\t\t\tpage: \"/location?name=\"+encodeURIComponent(activeID.id)+\"&list=poi\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"Noteworthy Residents\",\n\t\t\t\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\t\t\t\tpage: \"/people?nation=\"+encodeURIComponent(activeID.id)\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t]} />\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t} else return (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<HeaderBar str={activeID.id} menuType=\"location\"/>\n\t\t\t\t\t\t\t\t\t<div>{activeID.data.summary}</div>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t} else return (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tError: {decodeURIComponent(this.state.params.name)} not found.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t} else if (this.state.params.edit===\"true\") return (\n\t\t\t\t\t<div className=\"Text\">\n\t\t\t\t\t\tError: You must be logged in to edit this page.\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t} else return(\n\t\t\t\tisEditMode ?\n\t\t\t\t\t<EditPage data={this.state.data} doc={{}} />\n\t\t\t\t:\n\t\t\t\t\t<div>\n\t\t\t\t\t\tError: Parameter \"name\" missing.\n\t\t\t\t\t</div>\n\t\t\t);\n\t\t} else return ( <div> Loading... </div> );\n\t}\n}\n\nclass Menu extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tparams: parseParams(window.location.search),\n\t\t\tisOpen: false,\n\t\t};\n\t}\n\t\n\ttoggleMenu() {\n\t\tthis.setState({isOpen: (!this.state.isOpen)});\n\t}\n\t\n\trender() {\n\t\treturn(\n\t\t\t<div className=\"Menu\">\n\t\t\t\t<span className=\"HeaderButton\" onClick={() => { this.toggleMenu(); } }> MENU </span>\n\t\t\t\t<div className=\"MenuBody\" style={{visibility: this.state.isOpen?\"visible\":\"hidden\"}}>\n\t\t\t\t\t<List data={wb.getUser() ? (\n\t\t\t\t\t\tthis.props.type ?\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: \"Sign Out\",\n\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\tpage: rt+\"/signout\",\n\t\t\t\t\t\t\t}, // { title: \"Account\"... }\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: \"Edit Page\",\n\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\tpage: window.location.pathname + ( window.location.search ? window.location.search + \"&\" : \"?\" ) + \"edit=true\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: \"New \" + wb.capitalizeFirst(this.props.type),\n\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\tpage: rt+\"/\"+ this.props.type + \"?edit=true\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]\n\t\t\t\t\t\t:\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: \"Sign Out\",\n\t\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\t\tpage: rt+\"/signout\",\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t\t)\n\t\t\t\t\t:\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Sign In\",\n\t\t\t\t\t\t\tclickable: true,\n\t\t\t\t\t\t\tpage: rt+\"/signin\",\n\t\t\t\t\t\t}\n\t\t\t\t\t]} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nclass People extends Page {\n\trender(props) {\n\t\tif (this.state.data) {\n\t\t\tif (this.state.params.race)\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str={wb.capitalizeFirst(decodeURIComponent(this.state.params.race))} menuType=\"character\"/>\n\t\t\t\t\t\t<List data = {\n\t\t\t\t\t\t\tthis.state.data.filter(o => o.data.race===decodeURIComponent(this.state.params.race)).map(o => { return {title: o.data.title?o.data.title+\" \"+o.id:o.id, subtitle: o.data.summary, clickable: true, page: rt+\"/character?name=\"+encodeURIComponent(o.id)}; })\n\t\t\t\t\t\t} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\telse if (this.state.params.class)\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str={wb.capitalizeFirst(decodeURIComponent(this.state.params.class))} menuType=\"character\"/>\n\t\t\t\t\t\t<List data = {\n\t\t\t\t\t\t\tthis.state.data.filter(o => o.data.class===decodeURIComponent(this.state.params.class)).map(o => { return {title: o.data.title?o.data.title+\" \"+o.id:o.id, subtitle: o.data.summary, clickable: true, page: rt+\"/character?name=\"+encodeURIComponent(o.id)}; })\n\t\t\t\t\t\t} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\telse if (this.state.params.nation)\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str={\"Residents of \" + decodeURIComponent(this.state.params.nation)} menuType=\"character\"/>\n\t\t\t\t\t\t<List data = {\n\t\t\t\t\t\t\tthis.state.data.filter(o => o.data.homeland===decodeURIComponent(this.state.params.nation)).map(o => { return {title: o.data.title?o.data.title+\" \"+o.id:o.id, subtitle: o.data.summary, clickable: true, page: rt+\"/character?name=\"+encodeURIComponent(o.id)}; })\n\t\t\t\t\t\t} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\telse if (this.state.params.faction) {\n\t\t\t\tif (this.state.params.title)\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<HeaderBar str={decodeURIComponent(this.state.params.title)} menuType=\"character\"/>\n\t\t\t\t\t\t\t<List data = {\n\t\t\t\t\t\t\t\tthis.state.data.filter(o => o.data.faction===decodeURIComponent(this.state.params.faction) && o.data.title===decodeURIComponent(this.state.params.title)).map(o => { return {title: o.data.title?o.data.title+\" \"+o.id:o.id, subtitle: o.data.summary, clickable: true, page: rt+\"/character?name=\"+encodeURIComponent(o.id)}; })\n\t\t\t\t\t\t\t} />\n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\telse return (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str={\"Residents of \" + decodeURIComponent(this.state.params.nation)} menuType=\"character\"/>\n\t\t\t\t\t\t<List data = {\n\t\t\t\t\t\t\tthis.state.data.filter(o => o.data.faction===decodeURIComponent(this.state.params.faction)).map(o => { return {title: o.data.title?o.data.title+\" \"+o.id:o.id, subtitle: o.data.summary, clickable: true, page: rt+\"/character?name=\"+encodeURIComponent(o.id)}; })\n\t\t\t\t\t\t} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\t} else if (this.state.params.sort === \"alpha\")\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"People - Alphabetical\" menuType=\"character\"/>\n\t\t\t\t\t\t<List data = {\n\t\t\t\t\t\t\twb.sortByLastName(this.state.data).map(o => { return {title: o.data.title?o.data.title+\" \"+o.id:o.id, subtitle: o.data.summary, clickable: true, page: rt+\"/character?name=\"+encodeURIComponent(o.id)}; })\n\t\t\t\t\t\t} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\telse if (this.state.params.sort === \"class\")\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"People by Class\" menuType=\"character\"/>\n\t\t\t\t\t\t<UniqueList data = {\n\t\t\t\t\t\t\tthis.state.data.map(o => o.data.class)\n\t\t\t\t\t\t} clickable={true} page={rt+\"/people?class=\"} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\telse if (this.state.params.sort === \"race\")\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"People by Race\" menuType=\"character\"/>\n\t\t\t\t\t\t<UniqueList data = {\n\t\t\t\t\t\t\tthis.state.data.map(o => o.data.race)\n\t\t\t\t\t\t} clickable={true} page={rt+\"/people?race=\"} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\telse  return (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"People\" menuType=\"character\"/>\n\t\t\t\t\t\t<List data={wb.list.people} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t}\n\t\telse return (<div> Loading... </div>);\n\t}\n};\n\nclass SignIn extends React.Component {\n\t/*constructor(props) {\n\t\tsuper(props);\n\t}*/\n\t\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<HeaderBar str=\"Sign In\" />\n\t\t\t\t<button onClick={wb.user.login}>Sign in with Google.</button>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nclass World extends Page {\n\trender(props) {\n\t\tif (this.state.data) {\n\t\t\tif (this.state.params.type === \"nation\")\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"Nations\" menuType=\"location\"/>\n\t\t\t\t\t\t<List data={this.state.data.filter(o => o.data.type===\"Nation\").map(o => {return {title: o.id, subtitle: o.data.summary, clickable: true, page: rt+\"/location?name=\"+encodeURIComponent(o.id)};})} />\n\t\t\t\t\t</>\n\t\t\t\t)\n\t\t\telse if (this.state.params.type === \"historical\")\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"Historical Locations\" menuType=\"location\"/>\n\t\t\t\t\t\t<List data={this.state.data.filter(o => (o.data.subtype && o.data.subtype.includes(\"Historical\"))).map(o => {return {title: o.id, subtitle: o.data.summary, clickable: true, page: rt+\"/location?name=\"+encodeURIComponent(o.id)};})} />\n\t\t\t\t\t</>\n\t\t\t\t)\n\t\t\telse if (this.state.params.sort === \"alpha\")\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<HeaderBar str=\"Historical Locations\" menuType=\"location\"/>\n\t\t\t\t\t\t<List data={this.state.data.sort((a,b) => [a.id, b.id].sort()).map(o => {return {title: o.id, subtitle: o.data.summary, clickable: true, page: rt+\"/location?name=\"+encodeURIComponent(o.id)};})} />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\telse return (\n\t\t\t\t<>\n\t\t\t\t\t<HeaderBar str=\"The World\" menuType=\"location\"/>\n\t\t\t\t\t<List data={wb.list.world} />\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\t\telse return (<div> Loading... </div>);\n\t}\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport wb from \"./worldbuild\"\n\nwb.init();\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}